(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3dd66bd4"],{"0f07":function(t,e,n){},1320:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mine"},[n("div",{staticClass:"menu"},[n("el-menu",{attrs:{mode:"horizontal"}},[n("el-menu-item",[n("div",{staticStyle:{display:"inline-block"}},[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.createBlankSurvey()}}},[n("i",{staticClass:"el-icon-plus",staticStyle:{color:"#fff"}}),t._v("空白问卷 ")])],1)]),n("el-menu-item",{staticStyle:{float:"right"}},[n("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)],1),n("div",{staticClass:"table"},[n("div",{staticStyle:{height:"101%"}},[n("el-table",{attrs:{data:t.surveyList.filter((function(e){return!t.search||e.title.toLowerCase().includes(t.search.toLowerCase())}))}},[n("el-table-column",{attrs:{prop:"public",width:"35"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.quote>0?n("i",{staticClass:"el-icon-share",staticStyle:{color:"#3bb357"}}):t._e()]}}])}),n("el-table-column",{attrs:{prop:"title",label:"名称",width:"300",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{attrs:{underline:!1},on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[t._v(t._s(e.row.title))])]}}])}),n("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?n("el-tag",{attrs:{type:"info"}},[t._v("暂停回收")]):t._e(),1==e.row.status?n("el-tag",[t._v("正在回收")]):t._e()]}}])}),n("el-table-column",{attrs:{prop:"createdDate",label:"创建时间",sortable:"","show-overflow-tooltip":"",align:"center"}}),n("el-table-column",{attrs:{prop:"updateDate",label:"修改时间",sortable:"","show-overflow-tooltip":"",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("修改于 "+t._s((new Date).getDateDiff(new Date(e.row.updateDate))))]}}])}),n("el-table-column",{attrs:{prop:"recycle",label:"回收量",align:"right",width:"120"}}),n("el-table-column",{attrs:{prop:"quote",label:"使用数",align:"right",width:"120"}}),n("el-table-column",{attrs:{prop:"operate",label:"操作",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click","visible-arrow":"",offset:-85}},[n("el-menu",[0==e.row.status?n("el-menu-item",{on:{click:function(n){return t.handlePublish(e.$index,e.row,1)}}},[t._v("开始回收")]):t._e(),1==e.row.status?n("el-menu-item",{on:{click:function(n){return t.handlePublish(e.$index,e.row,0)}}},[t._v("暂停回收")]):t._e(),n("el-menu-item",{on:{click:function(n){return t.$router.push("/home/design/publish?surveyId="+e.row.id)}}},[t._v("投放问卷")]),n("el-menu-item",{on:{click:function(n){return t.handleData(e.$index,e.row)}}},[t._v("统计报表")]),n("el-divider",{staticClass:"setting-divider"}),n("el-menu-item",{on:{click:function(n){return t.handlePrint(e.$index,e.row)}}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("打印")]),n("i",{staticClass:"el-icon-printer"})]),n("el-menu-item",{on:{click:function(n){return t.handleCopy(e.$index,e.row)}}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("复制")]),n("i",{staticClass:"el-icon-copy-document"})]),n("el-menu-item",{on:{click:function(n){return t.handleEdit(e.$index,e.row)}}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("编辑")]),n("i",{staticClass:"el-icon-edit"})]),n("el-menu-item",{on:{click:function(n){return t.handleDelete(e.$index,e.row)}}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("删除")]),n("i",{staticClass:"el-icon-delete"})]),n("el-menu-item",{on:{click:function(n){return t.handleRefresh(e.$index,e.row)}}},[n("span",{attrs:{slot:"title"},slot:"title"},[t._v("清空答卷")]),n("i",{staticClass:"el-icon-refresh"})])],1),n("el-button",{attrs:{slot:"reference",size:"mini",plain:"",icon:"el-icon-more"},slot:"reference"})],1)]}}])})],1)],1)])])},o=[],s=(n("a434"),n("5530")),r=n("2f62"),l=n("4328"),a=n.n(l),c={data:function(){return{loading:!1,surveyList:[],search:""}},methods:Object(s["a"])(Object(s["a"])({},Object(r["b"])(["clearToken","clearUser"])),{},{handleEdit:function(t,e){this.$router.push({path:"/home/design/edit",query:{surveyId:e.id}})},handleCopy:function(t,e){var n=this;this.$confirm("确定要复制问卷《".concat(e.title,"》吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){var t={};t.surveyId=e.id,t.creator=e.creator,n.$http.post("survey/template/new",a.a.stringify(t)).then((function(){n.getSurveyList()})).catch((function(){n.$message({message:"创建失败!",type:"error"})}))}))},handlePublish:function(t,e,n){var i=this,o="",s="";1==n?(o="要开始回收问卷《".concat(e.title,"》吗？"),s="问卷已经开始回收"):(o="暂停回收期间，问卷链接关闭，问卷不回收数据。确定要暂停回收问卷《".concat(e.title,"》吗？"),s="问卷已经暂停回收"),this.$confirm(o,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.status=n;var t={};t.id=e.id,t.status=n,i.$http.post("survey/publish",t).then((function(){i.$message({message:'<strong style="color:#333">'.concat(s,"</strong>"),dangerouslyUseHTMLString:!0,iconClass:" ",center:!0,duration:1e3,offset:68,customClass:"center-msgbox"})}))}))},handleDelete:function(t,e){var n=this,i="确定要将问卷《".concat(e.title,"》彻底删除吗？");e.recycle>0&&(i+='<p>包括：<span style="color:#FF6161"><strong>'.concat(e.recycle," </strong>份有效答卷</span></p>")),this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0}).then((function(){n.surveyList.splice(t,1),n.$http.get("survey/del/"+e.id).then((function(){n.$message({message:'<strong style="color:#333">删除成功</strong>',dangerouslyUseHTMLString:!0,iconClass:" ",center:!0,duration:1e3,offset:68,customClass:"center-msgbox"})}))}))},handleRefresh:function(t,e){var n=this;this.$confirm("清空答卷不可恢复，确定清空问卷《".concat(e.title,"》的已有答卷吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){n.$http.get("recycle/refresh/"+e.id).then((function(){n.$message({message:'<strong style="color:#333">数据已清空</strong>',dangerouslyUseHTMLString:!0,iconClass:" ",center:!0,duration:1e3,offset:68,customClass:"center-msgbox"})}))}))},handleData:function(t,e){this.$router.push({path:"/home/design/chart/overview",query:{surveyId:e.id}})},handlePrint:function(t,e){window.open("/#/print?surveyId=".concat(e.id))},getSurveyList:function(){var t=this;this.loading=!0,this.$http.get("survey/list/"+this.uid).then((function(e){t.surveyList=e.data,t.loading=!1})).catch((function(){t.loading=!1}))},createBlankSurvey:function(){var t=this,e={};e.creator=this.uid,this.$http.post("survey/new/blank",e).then((function(e){var n=e.data;t.$router.push({path:"/home/design/edit",query:{surveyId:n}})}))}}),computed:Object(s["a"])({},Object(r["c"])({uid:function(t){return t.uid}})),mounted:function(){this.getSurveyList()}},u=c,d=(n("a98e"),n("532d"),n("2877")),f=Object(d["a"])(u,i,o,!1,null,"3390554a",null);e["default"]=f.exports},"532d":function(t,e,n){"use strict";n("0f07")},a434:function(t,e,n){"use strict";var i=n("23e7"),o=n("23cb"),s=n("a691"),r=n("50c4"),l=n("7b0b"),a=n("65f0"),c=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,g=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!f||!h},{splice:function(t,e){var n,i,u,d,f,h,y=l(this),b=r(y.length),w=o(t,b),$=arguments.length;if(0===$?n=i=0:1===$?(n=0,i=b-w):(n=$-2,i=m(p(s(e),0),b-w)),b+n-i>g)throw TypeError(v);for(u=a(y,i),d=0;d<i;d++)f=w+d,f in y&&c(u,d,y[f]);if(u.length=i,n<i){for(d=w;d<b-i;d++)f=d+i,h=d+n,f in y?y[h]=y[f]:delete y[h];for(d=b;d>b-i+n;d--)delete y[d-1]}else if(n>i)for(d=b-i;d>w;d--)f=d+i-1,h=d+n-1,f in y?y[h]=y[f]:delete y[h];for(d=0;d<n;d++)y[d+w]=arguments[d+2];return y.length=b-i+n,u}})},a98e:function(t,e,n){"use strict";n("f584")},f584:function(t,e,n){}}]);
//# sourceMappingURL=chunk-3dd66bd4.1ffffac0.js.map
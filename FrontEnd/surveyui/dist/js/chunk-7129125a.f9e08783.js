(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7129125a"],{"8dff":function(e,t,a){"use strict";a("d755")},a434:function(e,t,a){"use strict";var s=a("23e7"),r=a("23cb"),l=a("a691"),i=a("50c4"),o=a("7b0b"),n=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,y=9007199254740991,b="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var a,s,u,d,f,h,g=o(this),x=i(g.length),v=r(e,x),w=arguments.length;if(0===w?a=s=0:1===w?(a=0,s=x-v):(a=w-2,s=m(p(l(t),0),x-v)),x+a-s>y)throw TypeError(b);for(u=n(g,s),d=0;d<s;d++)f=v+d,f in g&&c(u,d,g[f]);if(u.length=s,a<s){for(d=v;d<x-s;d++)f=d+s,h=d+a,f in g?g[h]=g[f]:delete g[h];for(d=x;d>x-s+a;d--)delete g[d-1]}else if(a>s)for(d=x-s;d>v;d--)f=d+s-1,h=d+a-1,f in g?g[h]=g[f]:delete g[h];for(d=0;d<a;d++)g[d+v]=arguments[d+2];return g.length=x-s+a,u}})},a5fe:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cross"},[a("el-card",[a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:10}},[a("i",{staticClass:"el-icon-data-analysis"}),a("h4",[e._v("交叉分析")]),a("span",{staticClass:"explain"},[e._v("（仅支持单选题）")])]),a("el-col",{attrs:{span:10}})],1),a("el-form",{ref:"crossForm",attrs:{model:e.crossForm,rules:e.rules,"label-position":"top","label-width":"100px"}},[a("el-row",{attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"自变量X",prop:"xValue"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"添加自变量"},model:{value:e.crossForm.xValue,callback:function(t){e.$set(e.crossForm,"xValue",t)},expression:"crossForm.xValue"}},e._l(e.qsitems,(function(e,t){return a("el-option",{key:e.qsItemId,staticStyle:{width:"315px"},attrs:{label:t+1+". "+e.title,value:e.qsItemId,disabled:"radio"!==e.type}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.crossAnalysis}},[e._v("交叉分析")])],1)],1),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"因变量Y",prop:"yValue"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",placeholder:"添加因变量"},model:{value:e.crossForm.yValue,callback:function(t){e.$set(e.crossForm,"yValue",t)},expression:"crossForm.yValue"}},e._l(e.qsitems,(function(e,t){return a("el-option",{key:e.qsItemId,staticStyle:{width:"315px"},attrs:{label:t+1+". "+e.title,value:e.qsItemId,disabled:"radio"!==e.type}})})),1)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.charts,expression:"charts"}]},[a("el-row",{staticStyle:{padding:"0 32px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","show-summary":"","sum-text":"小计"}},[a("el-table-column",{attrs:{prop:"product",label:"X\\Y"}}),e._l(e.tableHeader,(function(e,t){return a("el-table-column",{key:t,attrs:{prop:e,label:e}})}))],2)],1),a("el-row",{staticStyle:{padding:"32px"}},[a("div",{ref:"column",staticClass:"charts"})])],1)],1)],1)},r=[],l=(a("c975"),a("a434"),a("4328")),i=a.n(l),o={data:function(){var e=this,t=function(t,a,s){e.crossForm.xValue===e.crossForm.yValue?s(new Error("题目不能重复!")):s()};return{crossForm:{xValue:"",yValue:""},qsitems:{},rules:{xValue:[{required:!0,message:"请添加自变量",trigger:"change"},{validator:t,trigger:"change"}],yValue:[{required:!0,message:"请添加因变量",trigger:"change"},{validator:t,trigger:"change"}]},tableData:[],tableHeader:[],charts:!1,myChart:null}},methods:{getQuestTitle:function(){var e=this,t=this.$route.query.surveyId;this.$http.get("survey/".concat(t)).then((function(t){e.qsitems=t.data.qsitems}))},crossAnalysis:function(){var e=this;this.$refs.crossForm.validate((function(t){if(!t)return!1;var a={};a.xValue=e.crossForm.xValue,a.yValue=e.crossForm.yValue,e.$http.post("recycle/cross_analysis",i.a.stringify(a)).then((function(t){e.tableData=t.data.tableData,e.tableHeader=t.data.tableHeader,e.charts=!0,setTimeout((function(){e.initColumnchart()}),50)}))}))},initColumnchart:function(){this.myChart&&this.myChart.dispose();var e=JSON.parse(JSON.stringify(this.tableHeader));e.splice(e.indexOf("小计"),1);for(var t=[],a=0;a<e.length;a++)t.push({type:"bar",label:{show:!0,position:"top"}});e.unshift("product"),window.console.log(e);var s=JSON.parse(JSON.stringify(this.tableData)),r=this.$echarts.init(this.$refs.column,"macarons"),l={legend:{orient:"horizontal",center:"center"},tooltip:{},dataset:{dimensions:e,source:s},xAxis:{type:"category",axisLabel:{interval:0,formatter:function(e){var t="",a=e.length,s=10,r=Math.ceil(a/s);if(a>s)for(var l=0;l<r;l++){var i="",o=l*s,n=o+s;i=l==r-1?e.substring(o,a):e.substring(o,n)+"\n",t+=i}else t=e;return t}}},yAxis:{},series:t,toolbox:{feature:{saveAsImage:{}}}};this.myChart=r,r.setOption(l)}},mounted:function(){this.getQuestTitle()}},n=o,c=(a("8dff"),a("2877")),u=Object(c["a"])(n,s,r,!1,null,"87e2f928",null);t["default"]=u.exports},c975:function(e,t,a){"use strict";var s=a("23e7"),r=a("4d64").indexOf,l=a("a640"),i=a("ae40"),o=[].indexOf,n=!!o&&1/[1].indexOf(1,-0)<0,c=l("indexOf"),u=i("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:n||!c||!u},{indexOf:function(e){return n?o.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})},d755:function(e,t,a){}}]);
//# sourceMappingURL=chunk-7129125a.f9e08783.js.map
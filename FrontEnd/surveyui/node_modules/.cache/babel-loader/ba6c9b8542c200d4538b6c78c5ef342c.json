{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js!/data/OnlineSurvey/FrontEnd/surveyui/node_modules/eslint-loader/index.js??ref--13-0!/data/OnlineSurvey/FrontEnd/surveyui/src/request/http.js","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/request/http.js","mtime":1605753490110},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBDb29raWVzIGZyb20gImpzLWNvb2tpZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAiZWxlbWVudC11aSI7IC8vIOivt+axgui2heaXtgoKYXhpb3MuZGVmYXVsdHMudGltZW91dCA9IDIwMDAwOyAvLyDorr7nva7ln7rnoYBVUkzlnLDlnYDvvIzlvoDlkI7nmoTor7fmsYLpg73mmK/luKbkuIror6XlnLDlnYAKCmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAiaHR0cDovL2xvY2FsaG9zdDozOTAwMCI7CnZhciBkb21haW4gPSBheGlvcy5kZWZhdWx0cy5kb21haW4gPSAiaHR0cDovL2xvY2FsaG9zdDo4MDgwIjsgLy/or7fmsYLmi6bmiKrvvIjliY3lj7DliLDlkI7lj7DvvIkKCmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgaWYgKENvb2tpZXMuZ2V0KCJTVVJWRVlfVE9LRU4iKSkgewogICAgY29uZmlnLmhlYWRlcnNbIkF1dGhvcml6YXRpb24iXSA9IENvb2tpZXMuZ2V0KCJTVVJWRVlfVE9LRU4iKTsKICB9CgogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvL+WTjeW6lOaLpuaIqu+8iOWQjuWPsOWIsOWJjeWPsO+8iQoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvL+WmguaenOi/lOWbnueahEhUVFDnirbmgIHnoIHkuLoyMDDvvIzor7TmmI7or7fmsYLosIPnlKjmiJDlip/vvIzlj6/ku6XmraPluLjmi7/liLDmlbDmja4KICAvL+WQpuWImeivt+axguWksei0pQogIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkgewogICAgaWYgKHJlc3BvbnNlLmRhdGEpIHsKICAgICAgLy8g5Lia5Yqh54q25oCB56CB5Li6MjAw77yM6K+05piO5pWw5o2u5pyJ5pWICiAgICAgIGlmIChyZXNwb25zZS5kYXRhLmNvZGUgPT09ICIyMDAiKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlc3BvbnNlKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZSk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICB2YXIgZXJyID0gZXJyb3IucmVzcG9uc2UuZGF0YTsKCiAgaWYgKGVyci5tZXNzYWdlID09PSAiNDAxIikgewogICAgTWVzc2FnZSh7CiAgICAgIG1lc3NhZ2U6ICLnmbvlvZXlt7LlpLHmlYjvvIzor7fph43mlrDnmbvlvZUiLAogICAgICB0eXBlOiAid2FybmluZyIKICAgIH0pOwogICAgQ29va2llcy5yZW1vdmUoIlNVUlZFWV9UT0tFTiIpOwogICAgQ29va2llcy5yZW1vdmUoIlNVUlZFWV9VU0VSIik7CiAgICBDb29raWVzLnJlbW92ZSgiU1VSVkVZX1VJRCIpOwogICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogIH0KCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7Ci8qKg0KICog5bCB6KOFZ2V06K+35rGCDQogKi8KCnZhciBnZXQgPSBmdW5jdGlvbiBnZXQodXJsLCBwYXJhbXMpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgYXhpb3MuZ2V0KHVybCwgewogICAgICBwYXJhbXM6IHBhcmFtcwogICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIC8v5bCG6L+U5Zue5YC86L+U5Zue57uZ6LCD55So6ICFCiAgICAgIHJlc29sdmUocmVzLmRhdGEpOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgICByZWplY3QoZXJyLmRhdGEpOwogICAgfSk7CiAgfSk7Cn07Ci8qKg0KICog5bCB6KOFcG9zdOivt+axgg0KICovCgoKdmFyIHBvc3QgPSBmdW5jdGlvbiBwb3N0KHVybCwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIGF4aW9zLnBvc3QodXJsLCBwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAvL+Wwhui/lOWbnuWAvOi/lOWbnue7meiwg+eUqOiAhQogICAgICByZXNvbHZlKHJlcy5kYXRhKTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgcmVqZWN0KGVyci5kYXRhKTsKICAgIH0pOwogIH0pOwp9OwovKioNCiAqIOS/neWtmOmXruWNt+eahOivt+axguWSjOaPkOekuuivrQ0KICovCgoKdmFyIHNhdmVTdXJ2ZXkgPSBmdW5jdGlvbiBzYXZlU3VydmV5KHVybCwgcGFyYW1zKSB7CiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciBzYXZpbmdNc2cgPSBNZXNzYWdlKHsKICAgICAgbWVzc2FnZTogJzxzdHJvbmcgc3R5bGU9ImNvbG9yOiMzMzMiPuS/neWtmOS4rS4uLjwvc3Ryb25nPicsCiAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwKICAgICAgaWNvbkNsYXNzOiAiICIsCiAgICAgIGNlbnRlcjogdHJ1ZSwKICAgICAgZHVyYXRpb246IDAsCiAgICAgIG9mZnNldDogNjgsCiAgICAgIGN1c3RvbUNsYXNzOiAiY2VudGVyLW1zZ2JveCIKICAgIH0pOwogICAgYXhpb3MucG9zdCh1cmwsIHBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHNhdmluZ01zZy5jbG9zZSgpOwogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAnPHN0cm9uZyBzdHlsZT0iY29sb3I6IzMzMyI+5L+d5a2Y5oiQ5YqfPC9zdHJvbmc+JywKICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgaWNvbkNsYXNzOiAiICIsCiAgICAgICAgY2VudGVyOiB0cnVlLAogICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgIG9mZnNldDogNjgsCiAgICAgICAgY3VzdG9tQ2xhc3M6ICJjZW50ZXItbXNnYm94IgogICAgICB9KTsKICAgICAgcmVzb2x2ZShyZXMuZGF0YSk7CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIHNhdmluZ01zZy5jbG9zZSgpOwogICAgICBNZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAnPHN0cm9uZyBzdHlsZT0iY29sb3I6IzMzMyI+5L+d5a2Y5aSx6LSlPC9zdHJvbmc+JywKICAgICAgICBkYW5nZXJvdXNseVVzZUhUTUxTdHJpbmc6IHRydWUsCiAgICAgICAgaWNvbkNsYXNzOiAiICIsCiAgICAgICAgY2VudGVyOiB0cnVlLAogICAgICAgIGR1cmF0aW9uOiAxMDAwLAogICAgICAgIG9mZnNldDogNjgsCiAgICAgICAgY3VzdG9tQ2xhc3M6ICJjZW50ZXItbXNnYm94IgogICAgICB9KTsKICAgICAgcmVqZWN0KGVyci5kYXRhKTsKICAgIH0pOwogIH0pOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIGdldDogZ2V0LAogIHBvc3Q6IHBvc3QsCiAgc2F2ZVN1cnZleTogc2F2ZVN1cnZleSwKICBkb21haW46IGRvbWFpbgp9Ow=="},{"version":3,"sources":["/data/OnlineSurvey/FrontEnd/surveyui/src/request/http.js"],"names":["axios","Cookies","router","Message","defaults","timeout","baseURL","domain","interceptors","request","use","config","get","headers","error","Promise","reject","response","status","data","code","resolve","err","message","type","remove","push","url","params","then","res","catch","post","saveSurvey","savingMsg","dangerouslyUseHTMLString","iconClass","center","duration","offset","customClass","close"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport router from \"@/router\";\r\nimport { Message } from \"element-ui\";\r\n\r\n// 请求超时\r\naxios.defaults.timeout = 20000;\r\n// 设置基础URL地址，往后的请求都是带上该地址\r\naxios.defaults.baseURL = \"http://localhost:39000\";\r\nconst domain = axios.defaults.domain = \"http://localhost:8080\"\r\n\r\n//请求拦截（前台到后台）\r\naxios.interceptors.request.use(\r\n  config => {\r\n    if (Cookies.get(\"SURVEY_TOKEN\")) {\r\n      config.headers[\"Authorization\"] = Cookies.get(\"SURVEY_TOKEN\");\r\n    }\r\n    return config;\r\n  },\r\n  error => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n//响应拦截（后台到前台）\r\naxios.interceptors.response.use(\r\n  response => {\r\n    //如果返回的HTTP状态码为200，说明请求调用成功，可以正常拿到数据\r\n    //否则请求失败\r\n    if (response.status === 200) {\r\n      if (response.data) {\r\n        // 业务状态码为200，说明数据有效\r\n        if (response.data.code === \"200\") {\r\n          return Promise.resolve(response);\r\n        } else {\r\n          return Promise.reject(response);\r\n        }\r\n      } else {\r\n        return Promise.resolve(response);\r\n      }\r\n    } else {\r\n      return Promise.reject(response);\r\n    }\r\n  },\r\n  error => {\r\n    const err = error.response.data;\r\n    if (err.message === \"401\") {\r\n      Message({\r\n        message: \"登录已失效，请重新登录\",\r\n        type: \"warning\"\r\n      });\r\n      Cookies.remove(\"SURVEY_TOKEN\");\r\n      Cookies.remove(\"SURVEY_USER\");\r\n      Cookies.remove(\"SURVEY_UID\");\r\n      router.push(\"/login\");\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n/**\r\n * 封装get请求\r\n */\r\nconst get = (url, params) => {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .get(url, {\r\n        params: params\r\n      })\r\n      .then(res => {\r\n        //将返回值返回给调用者\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n};\r\n\r\n/**\r\n * 封装post请求\r\n */\r\nconst post = (url, params) => {\r\n  return new Promise((resolve, reject) => {\r\n    axios\r\n      .post(url, params)\r\n      .then(res => {\r\n        //将返回值返回给调用者\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        reject(err.data);\r\n      });\r\n  });\r\n};\r\n\r\n/**\r\n * 保存问卷的请求和提示语\r\n */\r\nconst saveSurvey = (url, params) => {\r\n  return new Promise((resolve, reject) => {\r\n    const savingMsg = Message({\r\n      message: '<strong style=\"color:#333\">保存中...</strong>',\r\n      dangerouslyUseHTMLString: true,\r\n      iconClass: \" \",\r\n      center: true,\r\n      duration: 0,\r\n      offset: 68,\r\n      customClass: \"center-msgbox\"\r\n    });\r\n    axios\r\n      .post(url, params)\r\n      .then(res => {\r\n        savingMsg.close();\r\n        Message({\r\n          message: '<strong style=\"color:#333\">保存成功</strong>',\r\n          dangerouslyUseHTMLString: true,\r\n          iconClass: \" \",\r\n          center: true,\r\n          duration: 1000,\r\n          offset: 68,\r\n          customClass: \"center-msgbox\"\r\n        });\r\n        resolve(res.data);\r\n      })\r\n      .catch(err => {\r\n        savingMsg.close();\r\n        Message({\r\n          message: '<strong style=\"color:#333\">保存失败</strong>',\r\n          dangerouslyUseHTMLString: true,\r\n          iconClass: \" \",\r\n          center: true,\r\n          duration: 1000,\r\n          offset: 68,\r\n          customClass: \"center-msgbox\"\r\n        });\r\n        reject(err.data);\r\n      });\r\n  });\r\n};\r\n\r\nexport default {\r\n  get,\r\n  post,\r\n  saveSurvey,\r\n  domain\r\n};\r\n"]}]}
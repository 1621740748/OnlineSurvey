{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js!/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/index.vue","mtime":1605753490114},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc1JvdXRlckFsaXZlOiB0cnVlLAogICAgICBpc0FjdGl2ZTogIiIsCiAgICAgIHN1cnZleUlkOiAiIiwKICAgICAgc3VydmV5OiAiIiwKICAgICAgZWRpdDogIi9ob21lL2Rlc2lnbi9lZGl0P3N1cnZleUlkPSIuY29uY2F0KHRoaXMuc3VydmV5SWQpLAogICAgICBwdWJsaXNoOiAiL2hvbWUvZGVzaWduL3B1Ymxpc2g/c3VydmV5SWQ9Ii5jb25jYXQodGhpcy5zdXJ2ZXlJZCkKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2FkaW5nU3VydmV5OiBmdW5jdGlvbiBsb2FkaW5nU3VydmV5KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kaHR0cC5nZXQoInN1cnZleS9zdGF0dXMvIi5jb25jYXQodGhpcy5zdXJ2ZXlJZCkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnN1cnZleSA9IHJlcy5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVQdWJsaXNoOiBmdW5jdGlvbiBoYW5kbGVQdWJsaXNoKHN0YXR1cykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBtZXNzYWdlID0gIiI7CiAgICAgIGlmIChzdGF0dXMgPT0gMSkgbWVzc2FnZSA9ICLpl67ljbflt7Lnu4/lvIDlp4vlm57mlLYiO2Vsc2UgbWVzc2FnZSA9ICLpl67ljbflt7Lnu4/mmoLlgZzlm57mlLYiOwogICAgICB2YXIgc3VydmV5ID0ge307CiAgICAgIHN1cnZleS5pZCA9IHRoaXMuc3VydmV5LmlkOwogICAgICBzdXJ2ZXkuc3RhdHVzID0gc3RhdHVzOwogICAgICB0aGlzLiRodHRwLnBvc3QoInN1cnZleS9wdWJsaXNoIiwgc3VydmV5KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogIjxzdHJvbmcgc3R5bGU9XCJjb2xvcjojMzMzXCI+Ii5jb25jYXQobWVzc2FnZSwgIjwvc3Ryb25nPiIpLAogICAgICAgICAgZGFuZ2Vyb3VzbHlVc2VIVE1MU3RyaW5nOiB0cnVlLAogICAgICAgICAgaWNvbkNsYXNzOiAiICIsCiAgICAgICAgICBjZW50ZXI6IHRydWUsCiAgICAgICAgICBkdXJhdGlvbjogMTAwMCwKICAgICAgICAgIG9mZnNldDogNjgsCiAgICAgICAgICBjdXN0b21DbGFzczogImNlbnRlci1tc2dib3giCiAgICAgICAgfSk7CgogICAgICAgIF90aGlzMi5zdXJ2ZXkuc3RhdHVzID0gc3RhdHVzOyAvLyDliLfmlrDmipXmlL7pobXnmoTmiYvmnLrpooTop4gKCiAgICAgICAgaWYgKF90aGlzMi4kcm91dGUucGF0aCA9PSAiL2hvbWUvZGVzaWduL3B1Ymxpc2giKSB7CiAgICAgICAgICBfdGhpczIuaXNSb3V0ZXJBbGl2ZSA9IGZhbHNlOwoKICAgICAgICAgIF90aGlzMi4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLmlzUm91dGVyQWxpdmUgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBwcmV2aWV3OiBmdW5jdGlvbiBwcmV2aWV3KCkgewogICAgICAvLyDpooTop4jpl67ljbcKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJQQ1ZpZXciLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzdXJ2ZXlJZDogdGhpcy5zdXJ2ZXlJZCwKICAgICAgICAgIGlzUHJldmlldzogdHJ1ZQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdG9FZGl0UGFnZTogZnVuY3Rpb24gdG9FZGl0UGFnZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvaG9tZS9kZXNpZ24vZWRpdCIsCiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHN1cnZleUlkOiB0aGlzLnN1cnZleUlkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0b1B1Ymxpc2hQYWdlOiBmdW5jdGlvbiB0b1B1Ymxpc2hQYWdlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi9ob21lL2Rlc2lnbi9wdWJsaXNoIiwKICAgICAgICBxdWVyeTogewogICAgICAgICAgc3VydmV5SWQ6IHRoaXMuc3VydmV5SWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHRvQ2hhcnRQYWdlOiBmdW5jdGlvbiB0b0NoYXJ0UGFnZSgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvaG9tZS9kZXNpZ24vY2hhcnQvb3ZlcnZpZXciLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzdXJ2ZXlJZDogdGhpcy5zdXJ2ZXlJZAogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pc0FjdGl2ZSA9IHRoaXMuJHJvdXRlLnBhdGg7CiAgICB0aGlzLnN1cnZleUlkID0gdGhpcy4kcm91dGUucXVlcnkuc3VydmV5SWQ7CiAgICB0aGlzLmxvYWRpbmdTdXJ2ZXkoKTsKICB9Cn07"},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"design\">\r\n    <div class=\"sub-header\">\r\n      <el-menu router :default-active=\"isActive\" mode=\"horizontal\" active-text-color=\"#409EFF\">\r\n        <el-menu-item index=\"/home/design/edit\" style=\"padding-right:5px\" @click=\"toEditPage()\">编辑问卷</el-menu-item>\r\n        <el-menu-item style=\"cursor:default;padding:0;\">\r\n          <i class=\"el-icon-arrow-right\" style=\"margin-bottom:2px\"></i>\r\n        </el-menu-item>\r\n        <el-menu-item\r\n          index=\"/home/design/publish\"\r\n          style=\"padding:0 5px\"\r\n          @click=\"toPublishPage()\"\r\n        >投放问卷</el-menu-item>\r\n        <el-menu-item style=\"cursor:default;padding:0;\">\r\n          <i class=\"el-icon-arrow-right\" style=\"margin-bottom:2px\"></i>\r\n        </el-menu-item>\r\n        <el-menu-item\r\n          index=\"/home/design/chart/overview\"\r\n          style=\"padding-left:5px\"\r\n          @click=\"toChartPage()\"\r\n        >统计报表</el-menu-item>\r\n        <el-menu-item style=\"float:right;\" v-if=\"survey\">\r\n          <el-button plain icon=\"el-icon-view\" @click=\"preview()\">预览</el-button>\r\n          <el-button type=\"primary\" v-show=\"survey.status == 0\" @click=\"handlePublish(1)\">\r\n            <i class=\"el-icon-open\" style=\"color:#fff;\"></i>开始回收\r\n          </el-button>\r\n          <el-button type=\"primary\" v-show=\"survey.status == 1\" @click=\"handlePublish(0)\">\r\n            <i class=\"el-icon-turn-off\" style=\"color:#fff;\"></i>暂停回收\r\n          </el-button>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </div>\r\n    <div class=\"contain\">\r\n      <router-view v-if=\"isRouterAlive\"></router-view>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      isRouterAlive: true,\r\n      isActive: \"\",\r\n      surveyId: \"\",\r\n      survey: \"\",\r\n      edit: `/home/design/edit?surveyId=${this.surveyId}`,\r\n      publish: `/home/design/publish?surveyId=${this.surveyId}`\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    loadingSurvey() {\r\n      this.$http.get(`survey/status/${this.surveyId}`).then(res => {\r\n        this.survey = res.data;\r\n      });\r\n    },\r\n\r\n    handlePublish(status) {\r\n      let message = \"\";\r\n      if (status == 1) message = \"问卷已经开始回收\";\r\n      else message = \"问卷已经暂停回收\";\r\n      const survey = {};\r\n      survey.id = this.survey.id;\r\n      survey.status = status;\r\n      this.$http.post(\"survey/publish\", survey).then(() => {\r\n        this.$message({\r\n          message: `<strong style=\"color:#333\">${message}</strong>`,\r\n          dangerouslyUseHTMLString: true,\r\n          iconClass: \" \",\r\n          center: true,\r\n          duration: 1000,\r\n          offset: 68,\r\n          customClass: \"center-msgbox\"\r\n        });\r\n        this.survey.status = status;\r\n        // 刷新投放页的手机预览\r\n        if (this.$route.path == \"/home/design/publish\") {\r\n          this.isRouterAlive = false;\r\n          this.$nextTick(function() {\r\n            this.isRouterAlive = true;\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    preview() {\r\n      // 预览问卷\r\n      this.$router.push({\r\n        name: \"PCView\",\r\n        query: {\r\n          surveyId: this.surveyId,\r\n          isPreview: true\r\n        }\r\n      });\r\n    },\r\n\r\n    toEditPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/edit\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    },\r\n\r\n    toPublishPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/publish\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    },\r\n\r\n    toChartPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/chart/overview\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.isActive = this.$route.path;\r\n    this.surveyId = this.$route.query.surveyId;\r\n    this.loadingSurvey();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.design {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n/* 问卷生成-投放-数据步骤导航栏 start */\r\n.sub-header {\r\n  z-index: 999;\r\n  position: fixed;\r\n  top: 61px;\r\n  width: 100%;\r\n  min-width: 950px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  border-bottom: 1px solid #eaeaea;\r\n  zoom: 1;\r\n  background-color: #fff;\r\n  color: #333333;\r\n  box-shadow: 0px 3px 8px 0px rgba(224, 229, 236, 0.4);\r\n}\r\n/* 问卷生成-投放-数据步骤导航栏 end */\r\n.el-menu-item {\r\n  border-bottom-color: #fff !important;\r\n}\r\n.el-menu-item:hover {\r\n  color: #409eff !important;\r\n}\r\n.el-menu-item:nth-child(2) {\r\n  color: #909399 !important;\r\n}\r\n.el-menu-item:nth-child(4) {\r\n  color: #909399 !important;\r\n}\r\n.contain {\r\n  position: fixed;\r\n  top: 122px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n</style>"],"sourceRoot":"src/views/home/design"}]}
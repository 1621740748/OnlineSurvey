{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/thread-loader/dist/cjs.js!/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js!/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/Search.vue","mtime":1605753490110},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFFTIGZyb20gInFzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2hUZXh0OiAiIiwKICAgICAgc29ydGJ5OiAiMSIsCiAgICAgIHNlYXJjaFR5cGU6ICIxIiwKICAgICAgc2VhcmNoQ291bnRzOiB7CiAgICAgICAgc3VydmV5OiAwLAogICAgICAgIHF1ZXN0OiAwLAogICAgICAgIHRhZzogMAogICAgICB9LAogICAgICBzZWFyY2g6IFtdLAogICAgICBwYWdlaW5mbzogewogICAgICAgIC8v5q+P6aG15pWw6YePCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIC8v5b2T5YmN6aG1CiAgICAgICAgY3VycmVudFBhZ2U6IDEsCiAgICAgICAgLy/mgLvmlbDph48KICAgICAgICB0b3RhbDogMAogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0U29ydEJ5OiBmdW5jdGlvbiBzZWxlY3RTb3J0QnkoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBxdWVyeTogewogICAgICAgICAgc2VhcmNoVGV4dDogdGhpcy5zZWFyY2hUZXh0LAogICAgICAgICAgcGFnZTogMSwKICAgICAgICAgIHNvcnRieTogdGhpcy5zb3J0YnkKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLnBhZ2VpbmZvLmN1cnJlbnRQYWdlID0gMTsKICAgICAgdGhpcy5zZWFyY2hQYWdlUXVlcnkoKTsKICAgIH0sCiAgICBjaG9vc2VTZWFyY2hUeXBlOiBmdW5jdGlvbiBjaG9vc2VTZWFyY2hUeXBlKHR5cGUpIHsKICAgICAgdGhpcy5zZWFyY2hUeXBlID0gdHlwZTsKICAgIH0sCiAgICBzZWFyY2hSZXN1bHRDb3VudDogZnVuY3Rpb24gc2VhcmNoUmVzdWx0Q291bnQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0Lmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgIHZhciBkYXRhID0ge307CiAgICAgIGRhdGEuc2VhcmNoVGV4dCA9IHRoaXMuc2VhcmNoVGV4dDsKICAgICAgdGhpcy4kaHR0cC5wb3N0KCJzZWFyY2gvY291bnQiLCBRUy5zdHJpbmdpZnkoZGF0YSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLnNlYXJjaENvdW50cyA9IHJlcy5kYXRhOwogICAgICAgIF90aGlzLnBhZ2VpbmZvLnRvdGFsID0gX3RoaXMuc2VhcmNoQ291bnRzLnN1cnZleTsKICAgICAgfSk7CiAgICB9LAogICAgc2VhcmNoUGFnZVF1ZXJ5OiBmdW5jdGlvbiBzZWFyY2hQYWdlUXVlcnkoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGRhdGEgPSB7fTsKICAgICAgZGF0YS5zZWFyY2hUZXh0ID0gdGhpcy5zZWFyY2hUZXh0OwogICAgICBkYXRhLnBhZ2UgPSB0aGlzLnBhZ2VpbmZvLmN1cnJlbnRQYWdlOwogICAgICBkYXRhLnNpemUgPSB0aGlzLnBhZ2VpbmZvLnBhZ2VTaXplOwogICAgICB2YXIgVVJMID0gIiI7CgogICAgICBzd2l0Y2ggKHRoaXMuc29ydGJ5KSB7CiAgICAgICAgY2FzZSAiMSI6CiAgICAgICAgICBVUkwgPSAic2VhcmNoL3NlcnZleWxpc3QvZGF0ZSI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiMiI6CiAgICAgICAgICBVUkwgPSAic2VhcmNoL3NlcnZleWxpc3QvcXVvdGUiOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIjMiOgogICAgICAgICAgVVJMID0gInNlYXJjaC9zZXJ2ZXlsaXN0L3Zpc2l0cyI7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICB0aGlzLiRodHRwLnBvc3QoVVJMLCBRUy5zdHJpbmdpZnkoZGF0YSkpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzMi5zZWFyY2ggPSByZXMuZGF0YTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIF90aGlzMi5zZWFyY2gpIHsKICAgICAgICAgIGlmIChfdGhpczIuc2VhcmNoW2tleV0udGFncykgX3RoaXMyLnNlYXJjaFtrZXldLnRhZ3MgPSBfdGhpczIuc2VhcmNoW2tleV0udGFncy5zcGxpdCgiLCIpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMyLiRyZWZzLnNlYXJjaC5zY3JvbGxUb3AgPSAwOwogICAgICB9KTsKICAgIH0sCiAgICBzZWFyY2hDdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBzZWFyY2hDdXJyZW50Q2hhbmdlKHBhZ2UpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzZWFyY2hUZXh0OiB0aGlzLnNlYXJjaFRleHQsCiAgICAgICAgICBwYWdlOiBwYWdlLAogICAgICAgICAgc29ydGJ5OiB0aGlzLnNvcnRieQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMucGFnZWluZm8uY3VycmVudFBhZ2UgPSBwYWdlOwogICAgICB0aGlzLnNlYXJjaFBhZ2VRdWVyeSgpOwogICAgfSwKICAgIHByZXZpZXc6IGZ1bmN0aW9uIHByZXZpZXcoc3VydmV5SWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICJQQ1ZpZXciLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBzdXJ2ZXlJZDogc3VydmV5SWQsCiAgICAgICAgICBpc1ByZXZpZXc6IHRydWUsCiAgICAgICAgICBpc1RlbXBsYXRlOiB0cnVlLAogICAgICAgICAgc2VhcmNoVGV4dDogdGhpcy5zZWFyY2hUZXh0LAogICAgICAgICAgcGFnZTogdGhpcy5wYWdlaW5mby5jdXJyZW50UGFnZSwKICAgICAgICAgIHNvcnRieTogdGhpcy5zb3J0YnkKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuc2VhcmNoVGV4dCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LnNlYXJjaFRleHQ7CiAgICB0aGlzLnBhZ2VpbmZvLmN1cnJlbnRQYWdlID0gTnVtYmVyKHRoaXMuJHJvdXRlLnF1ZXJ5LnBhZ2UpOwogICAgdGhpcy5zb3J0YnkgPSB0aGlzLiRyb3V0ZS5xdWVyeS5zb3J0Ynk7CiAgICB0aGlzLnNlYXJjaFJlc3VsdENvdW50KCk7CiAgICB0aGlzLnNlYXJjaFBhZ2VRdWVyeSgpOwogIH0KfTs="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"search\" ref=\"search\">\r\n    <div style=\"width:950px; margin:25px auto;\">\r\n      <el-row :gutter=\"30\">\r\n        <el-col :span=\"6\">\r\n          <div class=\"menu\">\r\n            <el-menu>\r\n              <el-menu-item :class=\"{currentNav:searchType==1}\" @click=\"chooseSearchType(1)\">\r\n                <el-link :underline=\"false\">问卷</el-link>\r\n                <el-link :underline=\"false\" style=\"float:right\">\r\n                  <el-tag size=\"mini\" type=\"info\" effect=\"dark\">{{searchCounts.survey}}</el-tag>\r\n                </el-link>\r\n              </el-menu-item>\r\n              <!-- <el-menu-item :class=\"{currentNav:searchType==2}\" @click=\"chooseSearchType(2)\">\r\n                <el-link :underline=\"false\">题目</el-link>\r\n                <el-link :underline=\"false\" style=\"float:right\">\r\n                  <el-tag size=\"mini\" type=\"info\" effect=\"dark\">{{searchCounts.quest}}</el-tag>\r\n                </el-link>\r\n              </el-menu-item>\r\n              <el-menu-item :class=\"{currentNav:searchType==3}\" @click=\"chooseSearchType(3)\">\r\n                <el-link :underline=\"false\">标签</el-link>\r\n                <el-link :underline=\"false\" style=\"float:right\">\r\n                  <el-tag size=\"mini\" type=\"info\" effect=\"dark\">{{searchCounts.tag}}</el-tag>\r\n                </el-link>\r\n              </el-menu-item> -->\r\n            </el-menu>\r\n          </div>\r\n        </el-col>\r\n        <el-col :span=\"18\">\r\n          <div class=\"result-contain\">\r\n            <div class=\"detail\">\r\n              <h3>\r\n                <span v-if=\"searchType == '1'\">{{searchCounts.survey}}个问卷结果</span>\r\n                <span v-if=\"searchType == '2'\">{{searchCounts.quest}}个题目结果</span>\r\n                <span v-if=\"searchType == '3'\">{{searchCounts.tag}}个标签结果</span>\r\n                <el-select v-model=\"sortby\" placeholder=\"请选择\" @change=\"selectSortBy()\">\r\n                  <el-option-group label=\"选择排序条件\">\r\n                    <el-option value=\"1\" label=\"最近修改\"></el-option>\r\n                    <el-option value=\"2\" label=\"最多使用\"></el-option>\r\n                    <el-option value=\"3\" label=\"最多浏览\"></el-option>\r\n                  </el-option-group>\r\n                </el-select>\r\n              </h3>\r\n            </div>\r\n            <!-- 检索结果为0显示 -->\r\n            <div class=\"search-result-item\" v-if=\"search.length==0\">\r\n              <div style=\"width:400px;margin:50px auto;text-align:center;\">\r\n                <i class=\"el-icon-search\" style=\"font-size:30px;\"></i>\r\n                <h3 style=\"color:#24292E;margin:10px 0;\">我们未找到任何与 “{{searchText}}” 匹配的结果</h3>\r\n                <p style=\"color:#4f4f4f;font-size:12px;\">要不您换个关键字？</p>\r\n              </div>\r\n            </div>\r\n            <!-- 问卷检索结果显示 -->\r\n            <div v-if=\"searchType == '1'\">\r\n              <div class=\"search-result-item\" v-for=\"(item, index) in search\" :key=\"index\">\r\n                <div class=\"item-icon\">\r\n                  <i class=\"icon el-icon-collection\"></i>\r\n                </div>\r\n                <div class=\"item-text\">\r\n                  <div class=\"title\">\r\n                    <el-link\r\n                      @click=\"preview(item.id)\"\r\n                      v-html=\"item.title.replace(new RegExp(searchText, 'gm'), `<strong>${searchText}</strong>`)\"\r\n                    >{{item.title}}</el-link>\r\n                  </div>\r\n                  <div class=\"intro\" v-if=\"item.introduction\">\r\n                    <p\r\n                      v-html=\"item.introduction.replace(new RegExp(searchText, 'gm'), `<strong>${searchText}</strong>`)\"\r\n                    >{{item.introduction}}</p>\r\n                  </div>\r\n                  <div class=\"tags\" v-if=\"item.tags\">\r\n                    <el-tag size=\"mini\" v-for=\"(tag, index) in item.tags\" :key=\"index\">{{tag}}</el-tag>\r\n                  </div>\r\n                  <div class=\"info\">\r\n                    <el-tooltip content=\"使用数\" placement=\"bottom\" effect=\"light\">\r\n                      <el-link :underline=\"false\">\r\n                        <i class=\"el-icon-user-solid\"></i>\r\n                        {{item.quote}}\r\n                      </el-link>\r\n                    </el-tooltip>\r\n                    <el-tooltip content=\"回收数\" placement=\"bottom\" effect=\"light\">\r\n                      <el-link :underline=\"false\">\r\n                        <i class=\"el-icon-document-checked\"></i>\r\n                        {{item.recycleCount}}\r\n                      </el-link>\r\n                    </el-tooltip>\r\n                    <el-tooltip content=\"浏览数\" placement=\"bottom\" effect=\"light\">\r\n                      <el-link :underline=\"false\">\r\n                        <i class=\"el-icon-view\"></i>\r\n                        {{item.visits}}\r\n                      </el-link>\r\n                    </el-tooltip>\r\n                    <span\r\n                      class=\"update-date\"\r\n                    >修改于 {{new Date().getDateDiff(new Date(item.updateDate))}}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <!-- 问卷检索结果显示 -->\r\n            <div v-if=\"searchType == '2'\">\r\n              <div class=\"search-result-item\" v-for=\"(item, index) in 10\" :key=\"index\">\r\n                <div style=\"font-size:14px\">\r\n                <p>[单选题] 这是一道单选题单选题单选题。</p>\r\n                <span v-for=\"(item, index) in 4\" :key=\"index\">大苏打 / </span><span>...</span>\r\n                </div>\r\n                <span  style=\"float:right;font-size:14px;line-height:19.2px\">《<el-link :underline=\"true\" type=\"primary\">问卷标题</el-link>》</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"pagination\">\r\n              <el-pagination\r\n                background\r\n                layout=\"prev, pager, next\"\r\n                :page-size=\"pageinfo.pageSize\"\r\n                :current-page=\"Number($route.query.page)\"\r\n                :total=\"pageinfo.total\"\r\n                @current-change=\"searchCurrentChange\"\r\n                hide-on-single-page\r\n              ></el-pagination>\r\n            </div>\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport QS from \"qs\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchText: \"\",\r\n      sortby: \"1\",\r\n      searchType: \"1\",\r\n      searchCounts: {\r\n        survey: 0,\r\n        quest: 0,\r\n        tag: 0\r\n      },\r\n      search: [],\r\n      pageinfo: {\r\n        //每页数量\r\n        pageSize: 10,\r\n        //当前页\r\n        currentPage: 1,\r\n        //总数量\r\n        total: 0\r\n      }\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    selectSortBy() {\r\n      this.$router.push({\r\n        query: {\r\n          searchText: this.searchText,\r\n          page: 1,\r\n          sortby: this.sortby\r\n        }\r\n      });\r\n      this.pageinfo.currentPage = 1;\r\n      this.searchPageQuery();\r\n    },\r\n\r\n    chooseSearchType(type) {\r\n      this.searchType = type;\r\n    },\r\n\r\n    searchResultCount() {\r\n      if (this.searchText.length == 0) return;\r\n      const data = {};\r\n      data.searchText = this.searchText;\r\n      this.$http.post(\"search/count\", QS.stringify(data)).then(res => {\r\n        this.searchCounts = res.data;\r\n        this.pageinfo.total = this.searchCounts.survey;\r\n      });\r\n    },\r\n\r\n    searchPageQuery() {\r\n      const data = {};\r\n      data.searchText = this.searchText;\r\n      data.page = this.pageinfo.currentPage;\r\n      data.size = this.pageinfo.pageSize;\r\n      let URL = \"\";\r\n      switch (this.sortby) {\r\n        case \"1\":\r\n          URL = \"search/serveylist/date\";\r\n          break;\r\n        case \"2\":\r\n          URL = \"search/serveylist/quote\";\r\n          break;\r\n        case \"3\":\r\n          URL = \"search/serveylist/visits\";\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n      this.$http.post(URL, QS.stringify(data)).then(res => {\r\n        this.search = res.data;\r\n        for (const key in this.search) {\r\n          if(this.search[key].tags) this.search[key].tags = this.search[key].tags.split(\",\");\r\n        }\r\n        this.$refs.search.scrollTop = 0;\r\n      });\r\n    },\r\n\r\n    searchCurrentChange(page) {\r\n      this.$router.push({\r\n        query: {\r\n          searchText: this.searchText,\r\n          page: page,\r\n          sortby: this.sortby\r\n        }\r\n      });\r\n      this.pageinfo.currentPage = page;\r\n      this.searchPageQuery();\r\n    },\r\n\r\n    preview(surveyId) {\r\n      this.$router.push({\r\n        name: \"PCView\",\r\n        query: {\r\n          surveyId: surveyId,\r\n          isPreview: true,\r\n          isTemplate: true,\r\n          searchText: this.searchText,\r\n          page: this.pageinfo.currentPage,\r\n          sortby: this.sortby\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.searchText = this.$route.query.searchText;\r\n    this.pageinfo.currentPage = Number(this.$route.query.page);\r\n    this.sortby = this.$route.query.sortby;\r\n    this.searchResultCount();\r\n    this.searchPageQuery();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n.search {\r\n  position: fixed;\r\n  top: 60px;\r\n  left: 0px;\r\n  bottom: 0px;\r\n  right: 0px;\r\n  width: 100%;\r\n  height: calc(100%-60px);\r\n  overflow-y: scroll;\r\n}\r\n/* 查询类型菜单 start */\r\n.menu {\r\n  height: 120px;\r\n}\r\n.menu ul {\r\n  border-right: none;\r\n}\r\n.menu ul li {\r\n  border: 1px solid #eee;\r\n}\r\n/* .menu ul li:nth-child(1) {\r\n  border-bottom: none;\r\n}\r\n.menu ul li:nth-child(2) {\r\n  border-bottom: none;\r\n} */\r\n.menu ul li a {\r\n  color: #0366d6;\r\n}\r\n.menu .el-tag {\r\n  border-radius: 10px;\r\n}\r\n.currentNav {\r\n  border-left: 2px solid #e36209 !important;\r\n}\r\n/* 查询类型菜单 end */\r\n/* 查询结果内容 start */\r\n.result-contain {\r\n  padding-bottom: 60px;\r\n}\r\n.detail h3 {\r\n  color: #24292e;\r\n  height: 40px;\r\n  line-height: 40px;\r\n  margin-top: 0;\r\n}\r\n.detail .el-select {\r\n  float: right;\r\n  width: 150px;\r\n}\r\n.pagination {\r\n  text-align: center;\r\n  margin: 10px 0;\r\n}\r\n/* 查询结果内容 start */\r\n/* 查询条目 start */\r\n.search-result-item {\r\n  padding: 24px 0;\r\n  border-top: 1px solid #e1e4e8;\r\n}\r\n.search-result-item .item-icon {\r\n  margin-top: 2px;\r\n  margin-right: 10px;\r\n  float: left;\r\n}\r\n.search-result-item .item-text {\r\n  display: inline-block;\r\n  width: 675px;\r\n}\r\n.search-result-item .title a {\r\n  color: #0366d6;\r\n  font-size: 16px;\r\n}\r\n.el-link.is-underline:hover:after {\r\n  border-bottom: 2px solid #0366d6;\r\n}\r\n.search-result-item .intro p {\r\n  margin: 6px 0 2px 0;\r\n  font-size: 14px;\r\n}\r\n.search-result-item .tags {\r\n  margin: 6px 0 8px 0;\r\n}\r\n.search-result-item .tags span {\r\n  margin-right: 5px;\r\n}\r\n.search-result-item .info a {\r\n  margin-right: 16px;\r\n}\r\n.search-result-item .info .update-date {\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n/* 查询条目 end */\r\n/* 滚动条样式 start */\r\n.search::-webkit-scrollbar {\r\n  width: 10px;\r\n}\r\n.search::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  border-radius: 5px;\r\n}\r\n.search::-webkit-scrollbar-thumb:hover {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n/* 滚动条样式 end */\r\n</style>"],"sourceRoot":"src/views/home"}]}
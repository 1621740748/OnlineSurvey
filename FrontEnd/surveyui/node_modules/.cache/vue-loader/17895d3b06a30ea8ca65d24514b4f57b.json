{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/index.vue","mtime":1605753490114},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcE11dGF0aW9ucyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgQ29va2llcyBmcm9tICJqcy1jb29raWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiCiAgICAgIH0sCiAgICAgIHNlYXJjaFRleHQ6ICIiCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKFsiY2xlYXJUb2tlbiIsICJjbGVhclVzZXIiLCAiY2xlYXJVaWQiXSksCgogICAgaGFuZGxlU2VsZWN0KGtleSkgewogICAgICBpZiAodGhpcy4kcm91dGUucGF0aCA9PSBrZXkpIHRoaXMuJHJvdXRlci5nbygwKTsgLy8g5Yi35paw5b2T5YmN6aG1CiAgICB9LAoKICAgIGxvZ2luT3V0KCkgewogICAgICB0aGlzLmNsZWFyVG9rZW4oIlNVUlZFWV9UT0tFTiIpOwogICAgICB0aGlzLmNsZWFyVXNlcigiU1VSVkVZX1VTRVIiKTsKICAgICAgdGhpcy5jbGVhclVpZCgiU1VSVkVZX1VJRCIpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICIvbG9naW4iIH0pOwogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAi6YCA5Ye655m75b2VIiwKICAgICAgICBkdXJhdGlvbjogMTAwMAogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDmqKHns4rmn6Xor6Lpl67ljbcKICAgICAqLwogICAgc2VhcmNoU3VydmV5KCkgewogICAgICBpZiAodGhpcy5zZWFyY2hUZXh0Lmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXRoID09ICIvaG9tZS9zZWFyY2giKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9ob21lL3NlYXJjaCIsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBzZWFyY2hUZXh0OiB0aGlzLnNlYXJjaFRleHQsIC8v5pu05pawc2VhcmNoVGV4dAogICAgICAgICAgICBwYWdlOiAxLAogICAgICAgICAgICBzb3J0Ynk6ICIxIgogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsgLy/liLfmlrDpobXpnaLop6blj5Ftb3VudGVkCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogIi9ob21lL3NlYXJjaCIsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBzZWFyY2hUZXh0OiB0aGlzLnNlYXJjaFRleHQsCiAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgIHNvcnRieTogIjEiCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudXNlciA9IEpTT04ucGFyc2UoQ29va2llcy5nZXQoIlNVUlZFWV9VU0VSIikpOwogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/home","sourcesContent":["<template>\n  <div class=\"home\">\n    <!-- 顶层菜单栏 -->\n    <div class=\"header\">\n      <el-menu\n        router\n        :default-active=\"this.$route.path\"\n        mode=\"horizontal\"\n        @select=\"handleSelect\"\n        active-text-color=\"#409EFF\"\n      >\n        <el-menu-item>\n          <a href=\"/\" class=\"logo\">\n            <img alt=\"logo\" src=\"@/assets/image/logo.png\" width=\"32px\" />\n            <img alt=\"title\" src=\"@/assets/image/site-title.png\" width=\"32px\" />\n          </a>\n        </el-menu-item>\n        <el-menu-item>\n          <el-input\n            v-model=\"searchText\"\n            placeholder=\"搜索其他用户公开的问卷\"\n            @keyup.enter.native=\"searchSurvey()\"\n          ></el-input>\n        </el-menu-item>\n        <el-menu-item index=\"/home/design/edit\">创建问卷</el-menu-item>\n        <el-menu-item index=\"/home/mine\">我的问卷</el-menu-item>\n        <!-- <el-menu-item index=\"/home/rank\">网站动态</el-menu-item> -->\n        <el-menu-item style=\"float:right; padding:0; margin-right:20px;\">\n          <div class=\"account\">\n            <!-- <div class=\"message\">\n              <i class=\"el-icon-message-solid\"></i>\n            </div> -->\n            <el-avatar\n              :size=\"25\"\n              style=\"background:#409EFF;color:#FFF;margin-right:15px;\"\n            >{{user.username.substring(0,1)}}</el-avatar>\n            <el-dropdown>\n              <span class=\"el-dropdown-link\">\n                {{user.username}}\n                <i class=\"el-icon-arrow-down el-icon--right\"></i>\n              </span>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item disabled style=\"color:#666\">我的邮箱：{{user.email}}</el-dropdown-item>\n                <el-dropdown-item disabled style=\"color:#666\">注册时间：{{user.createdDate}}</el-dropdown-item>\n                <el-dropdown-item disabled divided style=\"color:#666\">上次登录时间：{{new Date().getDateDiff(new Date(user.lastLoginDate))}}</el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n            <span class=\"splitor\" style=\"color:#999;\">|</span>\n            <span>\n              <a class=\"loginBtn\" href=\"javascript:;\" @click=\"loginOut()\">退出</a>\n            </span>\n          </div>\n        </el-menu-item>\n      </el-menu>\n    </div>\n    <!-- 主内容 -->\n    <div class=\"contain\">\n      <router-view></router-view>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations } from \"vuex\";\nimport Cookies from \"js-cookie\";\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: \"\"\n      },\n      searchText: \"\"\n    };\n  },\n  methods: {\n    ...mapMutations([\"clearToken\", \"clearUser\", \"clearUid\"]),\n\n    handleSelect(key) {\n      if (this.$route.path == key) this.$router.go(0); // 刷新当前页\n    },\n\n    loginOut() {\n      this.clearToken(\"SURVEY_TOKEN\");\n      this.clearUser(\"SURVEY_USER\");\n      this.clearUid(\"SURVEY_UID\");\n      this.$router.push({ path: \"/login\" });\n      this.$message({\n        message: \"退出登录\",\n        duration: 1000\n      });\n    },\n\n    /**\n     * 模糊查询问卷\n     */\n    searchSurvey() {\n      if (this.searchText.length == 0) return;\n      if (this.$route.path == \"/home/search\") {\n        this.$router.push({\n          path: \"/home/search\",\n          query: {\n            searchText: this.searchText, //更新searchText\n            page: 1,\n            sortby: \"1\"\n          }\n        });\n        this.$router.go(0); //刷新页面触发mounted\n      } else {\n        this.$router.push({\n          path: \"/home/search\",\n          query: {\n            searchText: this.searchText,\n            page: 1,\n            sortby: \"1\"\n          }\n        });\n      }\n    },\n  },\n\n  mounted() {\n    this.user = JSON.parse(Cookies.get(\"SURVEY_USER\"));\n  }\n};\n</script>\n\n<style scoped>\n.home {\n  width: 100%;\n  height: 100%;\n}\n/* 顶部导航栏 start */\n.header {\n  height: 60px;\n  position: fixed;\n  width: 100%;\n  min-width: 780px;\n  z-index: 1000;\n}\n.header .logo img {\n  vertical-align: middle;\n}\n.header .loginBtn {\n  text-decoration: none;\n}\n.header .loginBtn:hover {\n  color: #409eff;\n}\n.header .account .message,\n.splitor {\n  display: inline-block;\n  margin: 0 10px;\n}\n.header .account .message i {\n  color: #bbb;\n  font-size: 20px;\n}\n.header .account .message i:hover {\n  color: #409eff;\n  cursor: pointer;\n}\n.header .account span {\n  color: #333;\n}\n/* 顶部导航栏 end */\n/* 主内容区 start */\n.contain {\n  width: 100%;\n  height: 100%;\n  overflow-x: auto;\n}\n/* 主内容区 end */\n.el-menu-item:nth-child(1) {\n  border-bottom-color: #fff !important;\n}\n.el-menu-item:nth-child(2) {\n  border-bottom-color: #fff !important;\n}\n.el-menu-item:nth-child(5) {\n  border-bottom-color: #fff !important;\n}\n</style>\n"]}]}
{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/answer/PCView.vue?vue&type=style&index=0&id=13eb049e&scoped=true&lang=css&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/answer/PCView.vue","mtime":1605753490110},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5hbnN3ZXIgew0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBiYWNrZ3JvdW5kOiAjZmZmOw0KICBvdmVyZmxvdzogaGlkZGVuOw0KICBmb250LWZhbWlseTogIlBpbmdGYW5nIFNDIiwgdGFob21hLCBhcmlhbCwgImhlbHZldGljYSBuZXVlIiwNCiAgICAiaGlyYWdpbm8gc2FucyBnYiIsICJtaWNyb3NvZnQgeWFoZWkiLCBzYW5zLXNlcmlmOw0KfQ0KLnByZXZpZXctdG9vbGJhciB7DQogIHdpZHRoOiBjYWxjKDEwMCUgLSA0NjBweCk7DQogIGhlaWdodDogNDVweDsNCiAgbGluZS1oZWlnaHQ6IDQ1cHg7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGNkZmU2Ow0KICBwb3NpdGlvbjogZml4ZWQ7DQogIHBhZGRpbmc6IDAgMjBweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICB6LWluZGV4OiA5OTg7DQp9DQoucHJldmlldy10b29sYmFyIC50b29sYmFyLWNlbnRlciB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgbWFyZ2luLWxlZnQ6IC0xMDRweDsNCn0NCi5wcmV2aWV3LXRvb2xiYXIgLnRvb2xiYXItY2VudGVyIC5idG4tcGhvbmUgew0KICBjb2xvcjogIzhhOGE4YTsNCn0NCi5wcmV2aWV3LXRvb2xiYXIgLnRvb2xiYXItY2VudGVyIC5idG4tcGhvbmU6aG92ZXIgew0KICBjb2xvcjogIzQwOWVmZjsNCn0NCi5zdXJ2ZXktY29udGVudCB7DQogIC8qIHdpZHRoOiBjYWxjKDEwMCUgLSAzNTBweCk7ICovDQogIHdpZHRoOiBjYWxjKDEwMCUgLSA0MjBweCk7DQogIGhlaWdodDogMTAwJTsNCiAgYmFja2dyb3VuZC1jb2xvcjogI2Y0ZjZmOTsNCiAgZmxvYXQ6IGxlZnQ7DQogIG92ZXJmbG93LXk6IHNjcm9sbDsNCiAgLyogdHJhbnNpdGlvbjogLjVzOyAqLw0KICBtYXJnaW4tcmlnaHQ6IDI1cHg7DQogIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNlMWU3ZjI7DQp9DQouc3VydmV5LWNvbnRlbnQgLnN1cnZleSB7DQogIHdpZHRoOiA4NTBweDsNCiAgbWF4LXdpZHRoOiAxMDAlOw0KICAvKiBtaW4td2lkdGg6IDczMHB4OyAqLw0KICBtYXJnaW46IDY4cHggYXV0byA0MHB4IGF1dG87DQp9DQouc3VydmV5LWlubmVyIHsNCiAgd2lkdGg6IDg1MHB4Ow0KICBtYXgtd2lkdGg6IDEwMCU7DQogIG1hcmdpbjogMCBhdXRvOw0KICBwYWRkaW5nOiAzNXB4IDAgNTBweCAwOw0KfQ0KLyog5rua5Yqo5p2h5qC35byPIHN0YXJ0ICovDQouc3VydmV5LWNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsNCiAgd2lkdGg6IDEwcHg7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQouc3VydmV5LWNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjE1KTsNCiAgYm9yZGVyLXJhZGl1czogNXB4Ow0KfQ0KLnN1cnZleS1jb250ZW50Ojotd2Via2l0LXNjcm9sbGJhci10aHVtYjpob3ZlciB7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTsNCn0NCi8qIOa7muWKqOadoeagt+W8jyBlbmQgKi8NCi5yaWdodC1pbmZvIHsNCiAgbWFyZ2luOiAxNXB4IDE1cHg7DQogIGhlaWdodDogMTAwJTsNCiAgb3ZlcmZsb3c6IGF1dG87DQp9DQovKiDmu5rliqjmnaHmoLflvI8gc3RhcnQgKi8NCi5yaWdodC1pbmZvOjotd2Via2l0LXNjcm9sbGJhciB7DQogIHdpZHRoOiA1cHg7DQogIGRpc3BsYXk6IG5vbmU7DQp9DQoucmlnaHQtaW5mbzo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMTUpOw0KICBib3JkZXItcmFkaXVzOiA1cHg7DQp9DQoucmlnaHQtaW5mbzo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWI6aG92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7DQp9DQovKiDmu5rliqjmnaHmoLflvI8gZW5kICovDQoucHJvZ3Jlc3Mgew0KICAvKiB3aWR0aDogY2FsYygxMDAlIC0gMzUwcHgpOyAqLw0KICB3aWR0aDogY2FsYygxMDAlIC0gNDIwcHgpOw0KICBtYXgtaGVpZ2h0OiA3MHB4Ow0KICAvKiBiYWNrZ3JvdW5kOiAjNDA5ZWZmOyM1M2E4ZmYgKi8NCiAgYmFja2dyb3VuZDogIzUzYThmZjsNCiAgcG9zaXRpb246IGZpeGVkOw0KICBib3R0b206IDA7DQogIGNvbG9yOiAjZmZmOw0KICBsaW5lLWhlaWdodDogMzVweDsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAvKiB0cmFuc2l0aW9uOiAuNXM7ICovDQogIHotaW5kZXg6IDk5OTsNCn0NCi5wcm9ncmVzcy1pbmZvIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBtYXJnaW46IDBweCAyMHB4Ow0KICAvKiBmb250LXNpemU6IDEzcHg7ICovDQogIGZvbnQtc2l6ZTogMXJlbTsNCn0NCi5wcm9ncmVzcy1iYXIgew0KICB3aWR0aDogMjAwcHg7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgbWFyZ2luOiAwIDVweDsNCn0NCi5xcy1pdGVtIHsNCiAgd2lkdGg6IDkwJTsNCiAgbWFyZ2luOiAwIGF1dG8gNDVweCBhdXRvOw0KICBwYWRkaW5nOiAyNXB4IDBweCAwIDA7DQogIGNvbG9yOiAjNDQ0Ow0KICAvKiBmb250LXNpemU6IDE1cHg7ICovDQogIGZvbnQtc2l6ZTogMXJlbTsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGxpbmUtaGVpZ2h0OiAxLjVyZW07DQp9DQoucXMtaXRlbSAuc2VyaWFsIHsNCiAgbWFyZ2luLXJpZ2h0OiA4cHg7DQogIGZvbnQtc2l6ZTogMThweDsNCiAgZm9udC13ZWlnaHQ6IGJvbGRlcjsNCn0NCi5xcy1pdGVtIC5tdXN0IHsNCiAgbWFyZ2luLWxlZnQ6IDhweDsNCiAgY29sb3I6ICNmZjYxNjE7DQogIGZvbnQtc2l6ZTogMThweDsNCn0NCi5xcy1pdGVtIC5ub3RpY2Ugew0KICBtYXJnaW4tbGVmdDogOHB4Ow0KICBjb2xvcjogIzRjNGM0YzsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBmb250LXdlaWdodDogYm9sZDsNCiAgcGFkZGluZzogNHB4IDdweDsNCiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA1KTsNCiAgYm9yZGVyLXJhZGl1czogM3B4Ow0KICB3aGl0ZS1zcGFjZTogbm93cmFwOyAvKiDlvLrliLbkuI3mjaLooYwgKi8NCn0NCi5ibG9jayB7DQogIGRpc3BsYXk6IGJsb2NrOw0KICBjb2xvcjogIzMzMzsNCn0NCi5hbi1pdGVtIHsNCiAgbWFyZ2luOiAwOw0KICBwYWRkaW5nOiAxMHB4IDIwcHg7DQogIGxpbmUtaGVpZ2h0OiAxLjJyZW07DQogIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsNCiAgd29yZC13cmFwOiBicmVhay13b3JkOw0KfQ0KLmFuLWl0ZW06aG92ZXIgew0KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDQwLCA5OSwgMjQzLCAwLjEpOw0KfQ0KLnN1cnZleS1pbmZvIHsNCiAgcGFkZGluZzogMjBweDsNCn0NCi5zdXJ2ZXktaW5mbyBoMiB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgY29sb3I6ICMzMzM7DQogIGZvbnQtd2VpZ2h0OiBib2xkOw0KICBmb250LXNpemU6IDEuOHJlbTsNCn0NCi5zdXJ2ZXktaW5mbyAuaW50cm8gew0KICBjb2xvcjogIzRmNGY0ZjsNCiAgLyogZm9udC1zaXplOiAxNHB4OyAqLw0KICBmb250LXNpemU6IDFyZW07DQogIG1hcmdpbi1ib3R0b206IDIwcHg7DQp9DQouc3VydmV5LWluZm8gLmRvdCB7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgY29sb3I6ICMyNDI5MmU7DQogIC8qIGZvbnQtc2l6ZTogMTZweDsgKi8NCiAgZm9udC1zaXplOiAxLjJyZW07DQogIG1hcmdpbi1ib3R0b206IDA7DQogIHBhZGRpbmc6IDRweCA3cHg7DQogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4wNSk7DQogIGJvcmRlci1yYWRpdXM6IDNweDsNCn0NCi5zdXJ2ZXktaW5mbyAubnVtIHsNCiAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICBjb2xvcjogIzI0MjkyZTsNCiAgLyogZm9udC1zaXplOiAyNHB4OyAqLw0KICBmb250LXNpemU6IDEuNXJlbTsNCiAgbWFyZ2luOiA1cHggMHB4IDVweCA0cHg7DQp9DQouc3VydmV5LWluZm8gLnRlbXBsYXRlQmFyIHsNCiAgd2lkdGg6IDQyMHB4Ow0KICBoZWlnaHQ6IDEzMHB4Ow0KICBwb3NpdGlvbjogYWJzb2x1dGU7DQogIHJpZ2h0OiAwOw0KICBib3R0b206IDA7DQogIGJvcmRlci10b3A6IDFweCBzb2xpZCAjZTFlNGU4Ow0KICB0ZXh0LWFsaWduOiBjZW50ZXI7DQp9DQouc3VydmV5LWluZm8gLnRlbXBsYXRlQmFyIC5wcm9tcHQgew0KICB3aWR0aDogMjE2cHg7DQogIGRpc3BsYXk6IGlubGluZS1ibG9jazsNCiAgdGV4dC1hbGlnbjogbGVmdDsNCiAgbWFyZ2luLXRvcDogMTBweDsNCiAgY29sb3I6ICM0ZjRmNGY7DQogIGZvbnQtc2l6ZTogMTRweDsNCn0NCi5zdXJ2ZXktaW5mbyAudGVtcGxhdGVCYXIgLnByb21wdCBhIHsNCiAgZm9udC1zaXplOiAxMnB4Ow0KfQ0K"},{"version":3,"sources":["PCView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PCView.vue","sourceRoot":"src/views/answer","sourcesContent":["<template>\r\n  <div class=\"answer\" v-wechat-title=\"this.title\">\r\n    <div class=\"survey-content\" ref=\"content\">\r\n      <!-- 预览面板 -->\r\n      <div class=\"preview-toolbar\" ref=\"toolbar\" v-if=\"isPreview\">\r\n        <el-button\r\n          type=\"text\"\r\n          icon=\"el-icon-circle-close\"\r\n          @click=\"closePreview()\"\r\n          style=\"float:left\"\r\n        >关闭预览</el-button>\r\n        <div class=\"toolbar-center\">\r\n          <el-button class=\"btn-computer\" type=\"text\" icon=\"el-icon-s-platform\">电脑预览</el-button>\r\n          <span class=\"interval\" style=\"margin:0 15px\"></span>\r\n          <el-button\r\n            class=\"btn-phone\"\r\n            type=\"text\"\r\n            icon=\"el-icon-mobile-phone\"\r\n            @click=\"toPhoneView()\"\r\n          >手机预览</el-button>\r\n        </div>\r\n      </div>\r\n      <div style=\"position: absolute; right:20px; margin:15px 5px; z-index:999\">\r\n        <el-button @click=\"openDrawer\" v-if=\"!drawer\" type=\"primary\" icon=\"el-icon-back\" circle></el-button>\r\n      </div>\r\n      <el-card :class=\"{survey:drawer}\" ref=\"survey\" v-loading=\"loading\" v-if=\"isNoneQs\">\r\n        <div class=\"survey-inner\">\r\n          <div class=\"qs-item\" v-for=\"(item, index) in survey.qsitems\" :key=\"index\">\r\n            <p>\r\n              <span class=\"serial\">{{index+1}}.</span>\r\n              <span class=\"title\">{{item.title}}</span>\r\n              <span class=\"must\" v-if=\"item.isRequired == 1\">*</span>\r\n              <span class=\"notice\" v-if=\"item.type == 'checkbox'\">多选题</span>\r\n            </p>\r\n            <div v-if=\"item.type === 'radio'\">\r\n              <el-radio-group class=\"block\" v-model=\"answer[item.id]\">\r\n                <el-radio\r\n                  class=\"block an-item\"\r\n                  :label=\"option.id\"\r\n                  v-for=\"(option, i) in item.options\"\r\n                  :key=\"i\"\r\n                  @change=\"refreshProgress(item.id);\"\r\n                  width=\"100\"\r\n                >{{option.value}}</el-radio>\r\n              </el-radio-group>\r\n              <!-- <el-input v-show=\"otherOpt\" v-model=\"answer[item.id]\"></el-input> -->\r\n            </div>\r\n            <div v-else-if=\"item.type === 'checkbox'\">\r\n              <el-checkbox-group v-model=\"answer[item.id]\">\r\n                <el-checkbox\r\n                  class=\"block an-item\"\r\n                  :label=\"option.id\"\r\n                  v-for=\"(option, i) in item.options\"\r\n                  :key=\"i\"\r\n                  @change=\"refreshProgress(item.id)\"\r\n                >{{option.value}}</el-checkbox>\r\n              </el-checkbox-group>\r\n            </div>\r\n            <div v-else-if=\"item.type === 'textarea'\">\r\n              <el-input\r\n                type=\"textarea\"\r\n                :autosize=\"{ minRows: 5, maxRows: 5}\"\r\n                v-model=\"answer[item.id]\"\r\n                :oninput=\"refreshProgress(item.id)\"\r\n              ></el-input>\r\n            </div>\r\n            <div v-else-if=\"item.type === 'rate'\">\r\n              <el-rate\r\n                show-text\r\n                :texts=\"['非常不满意','','','','非常满意']\"\r\n                v-model=\"answer[item.id]\"\r\n                @change=\"refreshProgress(item.id)\"\r\n              ></el-rate>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div style=\"text-align:center;margin-bottom:70px;\" v-show=\"answerNumber != 0\">\r\n          <el-button v-show=\"!allowSubmit\" type=\"primary\" disabled>请将必填题答完</el-button>\r\n          <el-button v-show=\"allowSubmit\" type=\"primary\" @click=\"submitSurvey\">提交问卷</el-button>\r\n        </div>\r\n      </el-card>\r\n      <div class=\"progress\" ref=\"line\">\r\n        <div class=\"progress-info\">{{answerNumber}}题已回答(共{{survey.number}}个问题)</div>\r\n        <div class=\"progress-bar\">\r\n          <el-progress\r\n            :show-text=\"false\"\r\n            :stroke-width=\"7\"\r\n            :percentage=\"percentage\"\r\n            status=\"warning\"\r\n          ></el-progress>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"right-info\">\r\n      <el-button\r\n        @click=\"closeDrawer\"\r\n        type=\"primary\"\r\n        icon=\"el-icon-right\"\r\n        circle\r\n        style=\"float:right; margin: 0 10px;\"\r\n      ></el-button>\r\n      <div class=\"survey-info\">\r\n        <h2>{{survey.title}}</h2>\r\n        <p class=\"intro\">{{survey.introduction}}</p>\r\n        <p class=\"dot\">问题数</p>\r\n        <br />\r\n        <p class=\"num\">{{survey.number}}</p>\r\n        <div v-if=\"survey.totalTime > 0\">\r\n          <p class=\"dot\">完成所需时间</p>\r\n          <br />\r\n          <p class=\"num\">{{parseInt(survey.totalTime/60)}}分{{survey.totalTime%60}}秒</p>\r\n        </div>\r\n\r\n        <!-- 使用模板面板 -->\r\n        <div v-if=\"isTemplate\">\r\n          <p class=\"dot\">使用次数</p>\r\n          <br />\r\n          <p class=\"num\">{{survey.quote}}</p>\r\n          <div class=\"templateBar\" ref=\"templateBar\">\r\n            <div style=\"margin-top:20px;\">\r\n              <el-button type=\"primary\" @click=\"createTemplateSurvey()\" style=\"padding:12px 60px;\">\r\n                使用此模板\r\n                <i class=\"el-icon-right\" style=\"margin-left:10px;\"></i>\r\n              </el-button>\r\n              <div class=\"prompt\">\r\n                没有找到您想要的模板吗？\r\n                <el-link type=\"primary\" href=\"/#/home/design/edit\">立即创建空白问卷</el-link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\nimport QS from \"qs\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: \"\",\r\n      surveyId: \"\",\r\n      drawer: true,\r\n      answer: {},\r\n      markIds: [],\r\n      isNoneQs: false,\r\n      isPreview: false,\r\n      isPhonePreview: false,\r\n      isTemplate: false,\r\n      fromURL: \"\",\r\n      timer: null,\r\n      totalTime: 0,\r\n      allowSubmit: false,\r\n\r\n      answerNumber: 0,\r\n      percentage: 0,\r\n\r\n      loading: true,\r\n      survey: {},\r\n\r\n      //\r\n      otherOpt: false\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    openDrawer() {\r\n      this.drawer = true;\r\n      this.$refs.content.style.width = \"calc(100% - 420px)\";\r\n      this.$refs.line.style.width = \"calc(100% - 420px)\";\r\n      if (this.isPreview) this.$refs.toolbar.style.width = \"calc(100% - 460px)\";\r\n      if (this.isTemplate) this.$refs.templateBar.style.width = \"420px\";\r\n    },\r\n\r\n    closeDrawer() {\r\n      this.drawer = false;\r\n      this.$refs.content.style.width = \"100%\";\r\n      this.$refs.line.style.width = \"100%\";\r\n      if (this.isPreview) this.$refs.toolbar.style.width = \"100%\";\r\n      if (this.isTemplate) this.$refs.templateBar.style.width = \"0px\";\r\n    },\r\n\r\n    /**\r\n     * 提交填写的问卷\r\n     */\r\n    submitSurvey() {\r\n      window.console.log(this.answer);\r\n      if (this.isPreview || this.isPhonePreview) {\r\n        this.$alert(\"预览模式下提交不会记录数据\", \"提示\").then(() => {\r\n          this.$router.push(\"/submit/success\");\r\n        });\r\n        return;\r\n      }\r\n      clearInterval(this.timer); // 清除计时器\r\n      let parame = {};\r\n      let surveyRecycle = {};\r\n      surveyRecycle.surveyId = this.surveyId;\r\n      surveyRecycle.totalTime = this.totalTime;\r\n      surveyRecycle.submitDate = new Date().format(\"yyyy-MM-dd hh:mm:ss\");\r\n      // 设备\r\n      surveyRecycle.deviceInfo = /Android|webOS|iPhone|iPod|BlackBerry/i.test(\r\n        navigator.userAgent\r\n      )\r\n        ? 2 // 访问设备：手机\r\n        : 1; // 访问设备：PC\r\n      // 来源\r\n      // 判断是否在微信浏览器中打开\r\n      if (this.$route.query.qrcode === \"true\")\r\n        surveyRecycle.dataSource = \"二维码\";\r\n      else if (this.is_weixn()) surveyRecycle.dataSource = \"微信\";\r\n      else surveyRecycle.dataSource = \"链接\";\r\n      surveyRecycle.ip = returnCitySN[\"cip\"]; // eslint-disable-line no-undef\r\n      surveyRecycle.position = returnCitySN[\"cname\"]; // eslint-disable-line no-undef\r\n\r\n      parame.surveyRecycle = surveyRecycle;\r\n\r\n      let answer = [];\r\n      for (const key in this.answer) {\r\n        let anitem = {};\r\n        anitem.questionId = key;\r\n        this.survey.qsitems.forEach(item => {\r\n          if (item.id === key) anitem.type = item.type;\r\n        });\r\n        anitem.content = this.answer[key];\r\n        answer.push(anitem);\r\n      }\r\n      parame.answers = answer;\r\n      this.$http\r\n        .post(\"answer\", parame)\r\n        .then(() => {\r\n          this.$router.push(\"/submit/success\");\r\n        })\r\n        .catch(() => {\r\n          this.$alert(\"提交失败\");\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 向服务器请求问卷信息\r\n     */\r\n    getSurvey() {\r\n      this.$http\r\n        .get(\"survey/\" + this.surveyId)\r\n        .then(res => {\r\n          this.loading = false;\r\n          this.survey = res.data;\r\n          if (this.isPreview) this.title = \"电脑预览\";\r\n          else if (this.isTemplate) this.title = \"模板预览\";\r\n          else this.title = this.survey.title;\r\n          if (!this.isPhonePreview) {\r\n            // 问卷已关闭跳转\r\n            if (!this.isPreview && this.survey.status == 0)\r\n              this.$router.push(\"/close\");\r\n            if (\r\n              this.survey.enHandle == 1 &&\r\n              new Date(this.survey.enAnDate) < new Date()\r\n            )\r\n              this.$router.push(\"/close\");\r\n            // 非预览正常访问，访客数加1\r\n            if (!this.isPreview && this.survey.status == 1) {\r\n              this.increasedVisits();\r\n              // 计时器，记录答题时间\r\n              this.timer = setInterval(() => {\r\n                this.totalTime++;\r\n              }, 1000);\r\n            }\r\n          }\r\n          if (this.survey.qsitems.length != 0) this.isNoneQs = true;\r\n          const qsitem = res.data.qsitems;\r\n          for (const key in qsitem) {\r\n            // 初始化answer的数据类型\r\n            if (\r\n              qsitem[key].type === \"textarea\" ||\r\n              qsitem[key].type === \"radio\"\r\n            ) {\r\n              this.$set(this.answer, qsitem[key].id, \"\");\r\n            } else if (qsitem[key].type === \"rate\") {\r\n              this.$set(this.answer, qsitem[key].id, null);\r\n            } else if (qsitem[key].type === \"checkbox\") {\r\n              this.$set(this.answer, qsitem[key].id, []);\r\n            }\r\n          }\r\n\r\n          for (const key in qsitem) {\r\n            // 初始化markIds的数据\r\n            this.markIds[qsitem[key].id] = 0;\r\n          }\r\n        })\r\n        .catch(() => {\r\n          this.$router.push(\"/nofind\");\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 更新答题进度\r\n     */\r\n    refreshProgress(id) {\r\n      // refreshProgress(id, option) {\r\n      // // 其他选项\r\n      // if(option) {\r\n      //   if(option.value==='其他 ____') {\r\n      //     // this.answer[id] = \"\";\r\n      //     this.otherOpt=true;\r\n      //   }\r\n      //   else this.otherOpt = false;\r\n      // }\r\n\r\n      this.markIds[id] = 1;\r\n      if (this.answer[id].length == 0) {\r\n        this.markIds[id] = 0;\r\n      }\r\n      let answerNumber = 0;\r\n      for (const key in this.markIds) {\r\n        if (this.markIds[key] == 1) {\r\n          answerNumber++;\r\n        }\r\n      }\r\n      this.answerNumber = answerNumber;\r\n      this.percentage = (this.answerNumber / this.survey.number) * 100;\r\n      // 控制提交按钮的显示\r\n      for (const key in this.survey.qsitems) {\r\n        const item = this.survey.qsitems[key];\r\n        if (item.isRequired == 1 && this.markIds[item.id] == 0) {\r\n          this.allowSubmit = false; // 隐藏提交按钮\r\n          return; // 发现有未答的必填题就停止往下执行\r\n        }\r\n      }\r\n      this.allowSubmit = true; // 显示提交按钮\r\n    },\r\n\r\n    /**\r\n     * 浏览量加一\r\n     */\r\n    increasedVisits() {\r\n      if(this.$route.query.noAddVisits) return;\r\n      this.$http.get(\"survey/visits/\" + this.surveyId);\r\n    },\r\n\r\n    /**\r\n     * 跳转到手机预览视图\r\n     */\r\n    toPhoneView() {\r\n      if (this.isTemplate) {\r\n        this.$router.push({\r\n          name: \"PhoneView\",\r\n          query: {\r\n            surveyId: this.surveyId,\r\n            searchText: this.$route.query.searchText,\r\n            page: Number(this.$route.query.page),\r\n            sortby: this.$route.query.sortby,\r\n            isTemplate: this.isTemplate\r\n          }\r\n        });\r\n      } else {\r\n        this.$router.push({\r\n          name: \"PhoneView\",\r\n          query: {\r\n            surveyId: this.surveyId\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 关闭预览模式\r\n     */\r\n    closePreview() {\r\n      if (this.isTemplate == true || this.isTemplate == \"true\") {\r\n        if (this.$route.query.searchText == null) {\r\n          window.close();\r\n        } else {\r\n          this.$router.push(this.fromURL);\r\n        }\r\n      } else {\r\n        this.$router.push(`/home/design/edit?surveyId=${this.surveyId}`);\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 使用模板创建问卷\r\n     */\r\n    createTemplateSurvey() {\r\n      const data = {};\r\n      data.surveyId = this.surveyId;\r\n      data.creator = this.uid;\r\n      this.$http\r\n        .post(\"survey/template/new\", QS.stringify(data))\r\n        .then(res => {\r\n          this.surveyId = res.data;\r\n          this.$router.push({\r\n            name: \"edit\",\r\n            query: {\r\n              surveyId: this.surveyId\r\n            }\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message({\r\n            message: \"创建失败!\",\r\n            type: \"error\"\r\n          });\r\n        });\r\n    },\r\n\r\n    /**\r\n     * 判断是否在微信浏览器中打开\r\n     */\r\n    is_weixn() {\r\n      var ua = navigator.userAgent.toLowerCase();\r\n      if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n        return true;\r\n      } else {\r\n        return false;\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState({\r\n      uid: state => state.uid\r\n    })\r\n  },\r\n\r\n  mounted() {\r\n    // 开启预览模式\r\n    this.isPreview = this.$route.query.isPreview;\r\n    this.isPhonePreview = this.$route.query.isPhonePreview;\r\n    // 开启使用模板\r\n    this.isTemplate = this.$route.query.isTemplate;\r\n    if (this.isTemplate) {\r\n      let searchText = this.$route.query.searchText;\r\n      let page = Number(this.$route.query.page);\r\n      let sortby = this.$route.query.sortby;\r\n      this.fromURL = `/home/search?searchText=${searchText}&page=${page}&sortby=${sortby}`;\r\n    }\r\n    // 接收路由传来的问卷编号\r\n    this.surveyId = this.$route.query.surveyId;\r\n    // 向服务器请求问卷信息\r\n    this.getSurvey();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.answer {\r\n  width: 100%;\r\n  height: 100%;\r\n  background: #fff;\r\n  overflow: hidden;\r\n  font-family: \"PingFang SC\", tahoma, arial, \"helvetica neue\",\r\n    \"hiragino sans gb\", \"microsoft yahei\", sans-serif;\r\n}\r\n.preview-toolbar {\r\n  width: calc(100% - 460px);\r\n  height: 45px;\r\n  line-height: 45px;\r\n  background-color: #fff;\r\n  border-bottom: 1px solid #dcdfe6;\r\n  position: fixed;\r\n  padding: 0 20px;\r\n  text-align: center;\r\n  z-index: 998;\r\n}\r\n.preview-toolbar .toolbar-center {\r\n  display: inline-block;\r\n  margin-left: -104px;\r\n}\r\n.preview-toolbar .toolbar-center .btn-phone {\r\n  color: #8a8a8a;\r\n}\r\n.preview-toolbar .toolbar-center .btn-phone:hover {\r\n  color: #409eff;\r\n}\r\n.survey-content {\r\n  /* width: calc(100% - 350px); */\r\n  width: calc(100% - 420px);\r\n  height: 100%;\r\n  background-color: #f4f6f9;\r\n  float: left;\r\n  overflow-y: scroll;\r\n  /* transition: .5s; */\r\n  margin-right: 25px;\r\n  border-right: 1px solid #e1e7f2;\r\n}\r\n.survey-content .survey {\r\n  width: 850px;\r\n  max-width: 100%;\r\n  /* min-width: 730px; */\r\n  margin: 68px auto 40px auto;\r\n}\r\n.survey-inner {\r\n  width: 850px;\r\n  max-width: 100%;\r\n  margin: 0 auto;\r\n  padding: 35px 0 50px 0;\r\n}\r\n/* 滚动条样式 start */\r\n.survey-content::-webkit-scrollbar {\r\n  width: 10px;\r\n  display: none;\r\n}\r\n.survey-content::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  border-radius: 5px;\r\n}\r\n.survey-content::-webkit-scrollbar-thumb:hover {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n/* 滚动条样式 end */\r\n.right-info {\r\n  margin: 15px 15px;\r\n  height: 100%;\r\n  overflow: auto;\r\n}\r\n/* 滚动条样式 start */\r\n.right-info::-webkit-scrollbar {\r\n  width: 5px;\r\n  display: none;\r\n}\r\n.right-info::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  border-radius: 5px;\r\n}\r\n.right-info::-webkit-scrollbar-thumb:hover {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n/* 滚动条样式 end */\r\n.progress {\r\n  /* width: calc(100% - 350px); */\r\n  width: calc(100% - 420px);\r\n  max-height: 70px;\r\n  /* background: #409eff;#53a8ff */\r\n  background: #53a8ff;\r\n  position: fixed;\r\n  bottom: 0;\r\n  color: #fff;\r\n  line-height: 35px;\r\n  text-align: center;\r\n  /* transition: .5s; */\r\n  z-index: 999;\r\n}\r\n.progress-info {\r\n  display: inline-block;\r\n  margin: 0px 20px;\r\n  /* font-size: 13px; */\r\n  font-size: 1rem;\r\n}\r\n.progress-bar {\r\n  width: 200px;\r\n  display: inline-block;\r\n  margin: 0 5px;\r\n}\r\n.qs-item {\r\n  width: 90%;\r\n  margin: 0 auto 45px auto;\r\n  padding: 25px 0px 0 0;\r\n  color: #444;\r\n  /* font-size: 15px; */\r\n  font-size: 1rem;\r\n  font-weight: bold;\r\n  line-height: 1.5rem;\r\n}\r\n.qs-item .serial {\r\n  margin-right: 8px;\r\n  font-size: 18px;\r\n  font-weight: bolder;\r\n}\r\n.qs-item .must {\r\n  margin-left: 8px;\r\n  color: #ff6161;\r\n  font-size: 18px;\r\n}\r\n.qs-item .notice {\r\n  margin-left: 8px;\r\n  color: #4c4c4c;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  padding: 4px 7px;\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n  border-radius: 3px;\r\n  white-space: nowrap; /* 强制不换行 */\r\n}\r\n.block {\r\n  display: block;\r\n  color: #333;\r\n}\r\n.an-item {\r\n  margin: 0;\r\n  padding: 10px 20px;\r\n  line-height: 1.2rem;\r\n  white-space: pre-wrap;\r\n  word-wrap: break-word;\r\n}\r\n.an-item:hover {\r\n  background-color: rgba(40, 99, 243, 0.1);\r\n}\r\n.survey-info {\r\n  padding: 20px;\r\n}\r\n.survey-info h2 {\r\n  display: inline-block;\r\n  color: #333;\r\n  font-weight: bold;\r\n  font-size: 1.8rem;\r\n}\r\n.survey-info .intro {\r\n  color: #4f4f4f;\r\n  /* font-size: 14px; */\r\n  font-size: 1rem;\r\n  margin-bottom: 20px;\r\n}\r\n.survey-info .dot {\r\n  display: inline-block;\r\n  color: #24292e;\r\n  /* font-size: 16px; */\r\n  font-size: 1.2rem;\r\n  margin-bottom: 0;\r\n  padding: 4px 7px;\r\n  background-color: rgba(0, 0, 0, 0.05);\r\n  border-radius: 3px;\r\n}\r\n.survey-info .num {\r\n  display: inline-block;\r\n  color: #24292e;\r\n  /* font-size: 24px; */\r\n  font-size: 1.5rem;\r\n  margin: 5px 0px 5px 4px;\r\n}\r\n.survey-info .templateBar {\r\n  width: 420px;\r\n  height: 130px;\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  border-top: 1px solid #e1e4e8;\r\n  text-align: center;\r\n}\r\n.survey-info .templateBar .prompt {\r\n  width: 216px;\r\n  display: inline-block;\r\n  text-align: left;\r\n  margin-top: 10px;\r\n  color: #4f4f4f;\r\n  font-size: 14px;\r\n}\r\n.survey-info .templateBar .prompt a {\r\n  font-size: 12px;\r\n}\r\n</style>"]}]}
{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/index.vue","mtime":1605753490114},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGlzUm91dGVyQWxpdmU6IHRydWUsDQogICAgICBpc0FjdGl2ZTogIiIsDQogICAgICBzdXJ2ZXlJZDogIiIsDQogICAgICBzdXJ2ZXk6ICIiLA0KICAgICAgZWRpdDogYC9ob21lL2Rlc2lnbi9lZGl0P3N1cnZleUlkPSR7dGhpcy5zdXJ2ZXlJZH1gLA0KICAgICAgcHVibGlzaDogYC9ob21lL2Rlc2lnbi9wdWJsaXNoP3N1cnZleUlkPSR7dGhpcy5zdXJ2ZXlJZH1gDQogICAgfTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgbG9hZGluZ1N1cnZleSgpIHsNCiAgICAgIHRoaXMuJGh0dHAuZ2V0KGBzdXJ2ZXkvc3RhdHVzLyR7dGhpcy5zdXJ2ZXlJZH1gKS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMuc3VydmV5ID0gcmVzLmRhdGE7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgaGFuZGxlUHVibGlzaChzdGF0dXMpIHsNCiAgICAgIGxldCBtZXNzYWdlID0gIiI7DQogICAgICBpZiAoc3RhdHVzID09IDEpIG1lc3NhZ2UgPSAi6Zeu5Y235bey57uP5byA5aeL5Zue5pS2IjsNCiAgICAgIGVsc2UgbWVzc2FnZSA9ICLpl67ljbflt7Lnu4/mmoLlgZzlm57mlLYiOw0KICAgICAgY29uc3Qgc3VydmV5ID0ge307DQogICAgICBzdXJ2ZXkuaWQgPSB0aGlzLnN1cnZleS5pZDsNCiAgICAgIHN1cnZleS5zdGF0dXMgPSBzdGF0dXM7DQogICAgICB0aGlzLiRodHRwLnBvc3QoInN1cnZleS9wdWJsaXNoIiwgc3VydmV5KS50aGVuKCgpID0+IHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgbWVzc2FnZTogYDxzdHJvbmcgc3R5bGU9ImNvbG9yOiMzMzMiPiR7bWVzc2FnZX08L3N0cm9uZz5gLA0KICAgICAgICAgIGRhbmdlcm91c2x5VXNlSFRNTFN0cmluZzogdHJ1ZSwNCiAgICAgICAgICBpY29uQ2xhc3M6ICIgIiwNCiAgICAgICAgICBjZW50ZXI6IHRydWUsDQogICAgICAgICAgZHVyYXRpb246IDEwMDAsDQogICAgICAgICAgb2Zmc2V0OiA2OCwNCiAgICAgICAgICBjdXN0b21DbGFzczogImNlbnRlci1tc2dib3giDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnN1cnZleS5zdGF0dXMgPSBzdGF0dXM7DQogICAgICAgIC8vIOWIt+aWsOaKleaUvumhteeahOaJi+acuumihOiniA0KICAgICAgICBpZiAodGhpcy4kcm91dGUucGF0aCA9PSAiL2hvbWUvZGVzaWduL3B1Ymxpc2giKSB7DQogICAgICAgICAgdGhpcy5pc1JvdXRlckFsaXZlID0gZmFsc2U7DQogICAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB0aGlzLmlzUm91dGVyQWxpdmUgPSB0cnVlOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgcHJldmlldygpIHsNCiAgICAgIC8vIOmihOiniOmXruWNtw0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBuYW1lOiAiUENWaWV3IiwNCiAgICAgICAgcXVlcnk6IHsNCiAgICAgICAgICBzdXJ2ZXlJZDogdGhpcy5zdXJ2ZXlJZCwNCiAgICAgICAgICBpc1ByZXZpZXc6IHRydWUNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHRvRWRpdFBhZ2UoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICIvaG9tZS9kZXNpZ24vZWRpdCIsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgc3VydmV5SWQ6IHRoaXMuc3VydmV5SWQNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHRvUHVibGlzaFBhZ2UoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7DQogICAgICAgIHBhdGg6ICIvaG9tZS9kZXNpZ24vcHVibGlzaCIsDQogICAgICAgIHF1ZXJ5OiB7DQogICAgICAgICAgc3VydmV5SWQ6IHRoaXMuc3VydmV5SWQNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgfSwNCg0KICAgIHRvQ2hhcnRQYWdlKCkgew0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goew0KICAgICAgICBwYXRoOiAiL2hvbWUvZGVzaWduL2NoYXJ0L292ZXJ2aWV3IiwNCiAgICAgICAgcXVlcnk6IHsNCiAgICAgICAgICBzdXJ2ZXlJZDogdGhpcy5zdXJ2ZXlJZA0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9DQogIH0sDQoNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmlzQWN0aXZlID0gdGhpcy4kcm91dGUucGF0aDsNCiAgICB0aGlzLnN1cnZleUlkID0gdGhpcy4kcm91dGUucXVlcnkuc3VydmV5SWQ7DQogICAgdGhpcy5sb2FkaW5nU3VydmV5KCk7DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/home/design","sourcesContent":["<template>\r\n  <div class=\"design\">\r\n    <div class=\"sub-header\">\r\n      <el-menu router :default-active=\"isActive\" mode=\"horizontal\" active-text-color=\"#409EFF\">\r\n        <el-menu-item index=\"/home/design/edit\" style=\"padding-right:5px\" @click=\"toEditPage()\">编辑问卷</el-menu-item>\r\n        <el-menu-item style=\"cursor:default;padding:0;\">\r\n          <i class=\"el-icon-arrow-right\" style=\"margin-bottom:2px\"></i>\r\n        </el-menu-item>\r\n        <el-menu-item\r\n          index=\"/home/design/publish\"\r\n          style=\"padding:0 5px\"\r\n          @click=\"toPublishPage()\"\r\n        >投放问卷</el-menu-item>\r\n        <el-menu-item style=\"cursor:default;padding:0;\">\r\n          <i class=\"el-icon-arrow-right\" style=\"margin-bottom:2px\"></i>\r\n        </el-menu-item>\r\n        <el-menu-item\r\n          index=\"/home/design/chart/overview\"\r\n          style=\"padding-left:5px\"\r\n          @click=\"toChartPage()\"\r\n        >统计报表</el-menu-item>\r\n        <el-menu-item style=\"float:right;\" v-if=\"survey\">\r\n          <el-button plain icon=\"el-icon-view\" @click=\"preview()\">预览</el-button>\r\n          <el-button type=\"primary\" v-show=\"survey.status == 0\" @click=\"handlePublish(1)\">\r\n            <i class=\"el-icon-open\" style=\"color:#fff;\"></i>开始回收\r\n          </el-button>\r\n          <el-button type=\"primary\" v-show=\"survey.status == 1\" @click=\"handlePublish(0)\">\r\n            <i class=\"el-icon-turn-off\" style=\"color:#fff;\"></i>暂停回收\r\n          </el-button>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </div>\r\n    <div class=\"contain\">\r\n      <router-view v-if=\"isRouterAlive\"></router-view>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      isRouterAlive: true,\r\n      isActive: \"\",\r\n      surveyId: \"\",\r\n      survey: \"\",\r\n      edit: `/home/design/edit?surveyId=${this.surveyId}`,\r\n      publish: `/home/design/publish?surveyId=${this.surveyId}`\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    loadingSurvey() {\r\n      this.$http.get(`survey/status/${this.surveyId}`).then(res => {\r\n        this.survey = res.data;\r\n      });\r\n    },\r\n\r\n    handlePublish(status) {\r\n      let message = \"\";\r\n      if (status == 1) message = \"问卷已经开始回收\";\r\n      else message = \"问卷已经暂停回收\";\r\n      const survey = {};\r\n      survey.id = this.survey.id;\r\n      survey.status = status;\r\n      this.$http.post(\"survey/publish\", survey).then(() => {\r\n        this.$message({\r\n          message: `<strong style=\"color:#333\">${message}</strong>`,\r\n          dangerouslyUseHTMLString: true,\r\n          iconClass: \" \",\r\n          center: true,\r\n          duration: 1000,\r\n          offset: 68,\r\n          customClass: \"center-msgbox\"\r\n        });\r\n        this.survey.status = status;\r\n        // 刷新投放页的手机预览\r\n        if (this.$route.path == \"/home/design/publish\") {\r\n          this.isRouterAlive = false;\r\n          this.$nextTick(function() {\r\n            this.isRouterAlive = true;\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    preview() {\r\n      // 预览问卷\r\n      this.$router.push({\r\n        name: \"PCView\",\r\n        query: {\r\n          surveyId: this.surveyId,\r\n          isPreview: true\r\n        }\r\n      });\r\n    },\r\n\r\n    toEditPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/edit\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    },\r\n\r\n    toPublishPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/publish\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    },\r\n\r\n    toChartPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/chart/overview\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.isActive = this.$route.path;\r\n    this.surveyId = this.$route.query.surveyId;\r\n    this.loadingSurvey();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.design {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n/* 问卷生成-投放-数据步骤导航栏 start */\r\n.sub-header {\r\n  z-index: 999;\r\n  position: fixed;\r\n  top: 61px;\r\n  width: 100%;\r\n  min-width: 950px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  border-bottom: 1px solid #eaeaea;\r\n  zoom: 1;\r\n  background-color: #fff;\r\n  color: #333333;\r\n  box-shadow: 0px 3px 8px 0px rgba(224, 229, 236, 0.4);\r\n}\r\n/* 问卷生成-投放-数据步骤导航栏 end */\r\n.el-menu-item {\r\n  border-bottom-color: #fff !important;\r\n}\r\n.el-menu-item:hover {\r\n  color: #409eff !important;\r\n}\r\n.el-menu-item:nth-child(2) {\r\n  color: #909399 !important;\r\n}\r\n.el-menu-item:nth-child(4) {\r\n  color: #909399 !important;\r\n}\r\n.contain {\r\n  position: fixed;\r\n  top: 122px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n</style>"]}]}
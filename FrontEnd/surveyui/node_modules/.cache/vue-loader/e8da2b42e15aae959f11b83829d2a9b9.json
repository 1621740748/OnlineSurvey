{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/index.vue?vue&type=style&index=0&id=55eabd72&scoped=true&lang=css&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/index.vue","mtime":1605753490114},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmRlc2lnbiB7DQogIHdpZHRoOiAxMDAlOw0KICBoZWlnaHQ6IDEwMCU7DQp9DQovKiDpl67ljbfnlJ/miJAt5oqV5pS+LeaVsOaNruatpemqpOWvvOiIquagjyBzdGFydCAqLw0KLnN1Yi1oZWFkZXIgew0KICB6LWluZGV4OiA5OTk7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiA2MXB4Ow0KICB3aWR0aDogMTAwJTsNCiAgbWluLXdpZHRoOiA5NTBweDsNCiAgaGVpZ2h0OiA2MHB4Ow0KICBsaW5lLWhlaWdodDogNjBweDsNCiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNlYWVhZWE7DQogIHpvb206IDE7DQogIGJhY2tncm91bmQtY29sb3I6ICNmZmY7DQogIGNvbG9yOiAjMzMzMzMzOw0KICBib3gtc2hhZG93OiAwcHggM3B4IDhweCAwcHggcmdiYSgyMjQsIDIyOSwgMjM2LCAwLjQpOw0KfQ0KLyog6Zeu5Y2355Sf5oiQLeaKleaUvi3mlbDmja7mraXpqqTlr7zoiKrmoI8gZW5kICovDQouZWwtbWVudS1pdGVtIHsNCiAgYm9yZGVyLWJvdHRvbS1jb2xvcjogI2ZmZiAhaW1wb3J0YW50Ow0KfQ0KLmVsLW1lbnUtaXRlbTpob3ZlciB7DQogIGNvbG9yOiAjNDA5ZWZmICFpbXBvcnRhbnQ7DQp9DQouZWwtbWVudS1pdGVtOm50aC1jaGlsZCgyKSB7DQogIGNvbG9yOiAjOTA5Mzk5ICFpbXBvcnRhbnQ7DQp9DQouZWwtbWVudS1pdGVtOm50aC1jaGlsZCg0KSB7DQogIGNvbG9yOiAjOTA5Mzk5ICFpbXBvcnRhbnQ7DQp9DQouY29udGFpbiB7DQogIHBvc2l0aW9uOiBmaXhlZDsNCiAgdG9wOiAxMjJweDsNCiAgYm90dG9tOiAwOw0KICBsZWZ0OiAwOw0KICByaWdodDogMDsNCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/home/design","sourcesContent":["<template>\r\n  <div class=\"design\">\r\n    <div class=\"sub-header\">\r\n      <el-menu router :default-active=\"isActive\" mode=\"horizontal\" active-text-color=\"#409EFF\">\r\n        <el-menu-item index=\"/home/design/edit\" style=\"padding-right:5px\" @click=\"toEditPage()\">编辑问卷</el-menu-item>\r\n        <el-menu-item style=\"cursor:default;padding:0;\">\r\n          <i class=\"el-icon-arrow-right\" style=\"margin-bottom:2px\"></i>\r\n        </el-menu-item>\r\n        <el-menu-item\r\n          index=\"/home/design/publish\"\r\n          style=\"padding:0 5px\"\r\n          @click=\"toPublishPage()\"\r\n        >投放问卷</el-menu-item>\r\n        <el-menu-item style=\"cursor:default;padding:0;\">\r\n          <i class=\"el-icon-arrow-right\" style=\"margin-bottom:2px\"></i>\r\n        </el-menu-item>\r\n        <el-menu-item\r\n          index=\"/home/design/chart/overview\"\r\n          style=\"padding-left:5px\"\r\n          @click=\"toChartPage()\"\r\n        >统计报表</el-menu-item>\r\n        <el-menu-item style=\"float:right;\" v-if=\"survey\">\r\n          <el-button plain icon=\"el-icon-view\" @click=\"preview()\">预览</el-button>\r\n          <el-button type=\"primary\" v-show=\"survey.status == 0\" @click=\"handlePublish(1)\">\r\n            <i class=\"el-icon-open\" style=\"color:#fff;\"></i>开始回收\r\n          </el-button>\r\n          <el-button type=\"primary\" v-show=\"survey.status == 1\" @click=\"handlePublish(0)\">\r\n            <i class=\"el-icon-turn-off\" style=\"color:#fff;\"></i>暂停回收\r\n          </el-button>\r\n        </el-menu-item>\r\n      </el-menu>\r\n    </div>\r\n    <div class=\"contain\">\r\n      <router-view v-if=\"isRouterAlive\"></router-view>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      isRouterAlive: true,\r\n      isActive: \"\",\r\n      surveyId: \"\",\r\n      survey: \"\",\r\n      edit: `/home/design/edit?surveyId=${this.surveyId}`,\r\n      publish: `/home/design/publish?surveyId=${this.surveyId}`\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    loadingSurvey() {\r\n      this.$http.get(`survey/status/${this.surveyId}`).then(res => {\r\n        this.survey = res.data;\r\n      });\r\n    },\r\n\r\n    handlePublish(status) {\r\n      let message = \"\";\r\n      if (status == 1) message = \"问卷已经开始回收\";\r\n      else message = \"问卷已经暂停回收\";\r\n      const survey = {};\r\n      survey.id = this.survey.id;\r\n      survey.status = status;\r\n      this.$http.post(\"survey/publish\", survey).then(() => {\r\n        this.$message({\r\n          message: `<strong style=\"color:#333\">${message}</strong>`,\r\n          dangerouslyUseHTMLString: true,\r\n          iconClass: \" \",\r\n          center: true,\r\n          duration: 1000,\r\n          offset: 68,\r\n          customClass: \"center-msgbox\"\r\n        });\r\n        this.survey.status = status;\r\n        // 刷新投放页的手机预览\r\n        if (this.$route.path == \"/home/design/publish\") {\r\n          this.isRouterAlive = false;\r\n          this.$nextTick(function() {\r\n            this.isRouterAlive = true;\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    preview() {\r\n      // 预览问卷\r\n      this.$router.push({\r\n        name: \"PCView\",\r\n        query: {\r\n          surveyId: this.surveyId,\r\n          isPreview: true\r\n        }\r\n      });\r\n    },\r\n\r\n    toEditPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/edit\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    },\r\n\r\n    toPublishPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/publish\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    },\r\n\r\n    toChartPage() {\r\n      this.$router.push({\r\n        path: \"/home/design/chart/overview\",\r\n        query: {\r\n          surveyId: this.surveyId\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.isActive = this.$route.path;\r\n    this.surveyId = this.$route.query.surveyId;\r\n    this.loadingSurvey();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.design {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n/* 问卷生成-投放-数据步骤导航栏 start */\r\n.sub-header {\r\n  z-index: 999;\r\n  position: fixed;\r\n  top: 61px;\r\n  width: 100%;\r\n  min-width: 950px;\r\n  height: 60px;\r\n  line-height: 60px;\r\n  border-bottom: 1px solid #eaeaea;\r\n  zoom: 1;\r\n  background-color: #fff;\r\n  color: #333333;\r\n  box-shadow: 0px 3px 8px 0px rgba(224, 229, 236, 0.4);\r\n}\r\n/* 问卷生成-投放-数据步骤导航栏 end */\r\n.el-menu-item {\r\n  border-bottom-color: #fff !important;\r\n}\r\n.el-menu-item:hover {\r\n  color: #409eff !important;\r\n}\r\n.el-menu-item:nth-child(2) {\r\n  color: #909399 !important;\r\n}\r\n.el-menu-item:nth-child(4) {\r\n  color: #909399 !important;\r\n}\r\n.contain {\r\n  position: fixed;\r\n  top: 122px;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n</style>"]}]}
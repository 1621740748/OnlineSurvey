{"remainingRequest":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js??vue-loader-options!/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/chart/components/RecycleList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/data/OnlineSurvey/FrontEnd/surveyui/src/views/home/design/chart/components/RecycleList.vue","mtime":1605753490114},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/data/OnlineSurvey/FrontEnd/surveyui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgUVMgZnJvbSAicXMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHN1cnZleUlkOiAiIiwNCiAgICAgIHJlY3ljbGVMaXN0OiBbXSwNCiAgICAgIHBhZ2VpbmZvOiB7DQogICAgICAgIC8v5q+P6aG15pWw6YePDQogICAgICAgIHBhZ2VTaXplOiA1LA0KICAgICAgICAvL+W9k+WJjemhtQ0KICAgICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgICAgLy/mgLvmlbDph48NCiAgICAgICAgdG90YWw6IDANCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcmVjeWNsZVBhZ2VRdWVyeSgpIHsNCiAgICAgIGNvbnN0IHJlY3ljbGUgPSB7fTsNCiAgICAgIHJlY3ljbGUuc3VydmV5SWQgPSB0aGlzLnN1cnZleUlkOw0KICAgICAgcmVjeWNsZS5wYWdlID0gdGhpcy5wYWdlaW5mby5jdXJyZW50UGFnZTsNCiAgICAgIHJlY3ljbGUuc2l6ZSA9IHRoaXMucGFnZWluZm8ucGFnZVNpemU7DQogICAgICB0aGlzLiRodHRwDQogICAgICAgIC5wb3N0KCJyZWN5Y2xlL2xpc3QiLCBRUy5zdHJpbmdpZnkocmVjeWNsZSkpDQogICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICB0aGlzLnJlY3ljbGVMaXN0ID0gcmVzLmRhdGEubGlzdDsNCiAgICAgICAgICAgIHRoaXMucGFnZWluZm8udG90YWwgPSByZXMuZGF0YS5jb3VudDsNCiAgICAgICAgfSkNCiAgICB9LA0KICAgIC8v5qC55o2u6aG156CB5p+l6K+i5pWw5o2uDQogICAgcmVjeWNsZUN1cnJlbnRDaGFuZ2UocGFnZSkgew0KICAgICAgdGhpcy5wYWdlaW5mby5jdXJyZW50UGFnZSA9IHBhZ2U7DQogICAgICB0aGlzLnJlY3ljbGVQYWdlUXVlcnkoKTsNCiAgICB9LA0KICAgIHJlY3ljbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7DQogICAgICB0aGlzLnBhZ2VpbmZvLnBhZ2VTaXplID0gcGFnZVNpemU7DQogICAgICB0aGlzLnBhZ2VpbmZvLmN1cnJlbnRQYWdlID0gMTsNCiAgICAgIHRoaXMucmVjeWNsZVBhZ2VRdWVyeSgpOw0KICAgIH0sDQogICAgc2VlKGlkLCByZWN5Y2xlSWQpIHsNCiAgICAgIHdpbmRvdy5vcGVuKA0KICAgICAgICBgIy92aWV3L3JlY3ljbGU/aWQ9JHtpZH0mcmVjeWNsZUlkPSR7cmVjeWNsZUlkfSZzdXJ2ZXlJZD0ke3RoaXMuc3VydmV5SWR9YA0KICAgICAgKTsNCiAgICB9LA0KICAgIGRlbChpbmRleCwgcm93KSB7DQogICAgICB0aGlzLiRodHRwDQogICAgICAgIC5nZXQoInJlY3ljbGUvZGVsLyIgKyByb3cuaWQpDQogICAgICAgIC50aGVuKCgpID0+IHsNCiAgICAgICAgICAgIHRoaXMucmVjeWNsZVBhZ2VRdWVyeSgpOw0KICAgICAgICB9KQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLnN1cnZleUlkID0gdGhpcy4kcm91dGUucXVlcnkuc3VydmV5SWQ7DQogICAgdGhpcy5yZWN5Y2xlUGFnZVF1ZXJ5KCk7DQogIH0NCn07DQo="},{"version":3,"sources":["RecycleList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecycleList.vue","sourceRoot":"src/views/home/design/chart/components","sourcesContent":["<template>\r\n  <div style=\"margin: 20px 0px;\">\r\n    <el-card class=\"box-card\">\r\n      <div>\r\n        <template>\r\n          <el-table :data=\"recycleList\" style=\"width: 100%\" height=\"387px\">\r\n            <el-table-column prop=\"operate\" label=\"操作\" align=\"center\" width=\"75\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  type=\"text\"\r\n                  icon=\"el-icon-view\"\r\n                  class=\"table-btn\"\r\n                  @click=\"see(scope.$index+(pageinfo.currentPage - 1) * pageinfo.pageSize + 1, scope.row.id)\"\r\n                ></el-button>\r\n                <el-popconfirm\r\n                  title=\"确定要删除吗？\"\r\n                  @onConfirm=\"del(scope.$index, scope.row)\"\r\n                  style=\"margin-left:10px;\"\r\n                >\r\n                  <el-button slot=\"reference\" type=\"text\" icon=\"el-icon-delete\" class=\"table-btn\"></el-button>\r\n                </el-popconfirm>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column type=\"index\" label=\"序号\" width=\"75\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span>{{scope.$index+(pageinfo.currentPage - 1) * pageinfo.pageSize + 1}}</span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"submitDate\" label=\"提交答卷时间\" width=\"150\" align=\"center\" sortable></el-table-column>\r\n            <el-table-column prop=\"totalTime\" label=\"所用时间\" align=\"center\" sortable>\r\n              <template slot-scope=\"scope\">{{scope.row.totalTime}}秒</template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"deviceInfo\" label=\"设备\" width=\"75\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <span v-if=\"scope.row.deviceInfo == 1\" style=\"color:#409EFF\">\r\n                  <el-tooltip effect=\"light\" placement=\"bottom-start\">\r\n                    <i class=\"el-icon-s-platform\"></i>\r\n                    <div slot=\"content\">电脑提交</div>\r\n                  </el-tooltip>\r\n                </span>\r\n                <span v-else-if=\"scope.row.deviceInfo == 2\" style=\"color:#2f9833\">\r\n                  <el-tooltip effect=\"light\" placement=\"bottom-start\">\r\n                    <i class=\"el-icon-mobile-phone\"></i>\r\n                    <div slot=\"content\">手机提交</div>\r\n                  </el-tooltip>\r\n                </span>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"dataSource\" label=\"来源\" align=\"center\" width=\"75\"></el-table-column>\r\n            <el-table-column prop=\"position\" label=\"来自IP\" align=\"center\">\r\n              <template slot-scope=\"scope\">\r\n                <div v-if=\"scope.row.ip != null\">\r\n                  <el-tooltip effect=\"light\" placement=\"bottom-start\">\r\n                    <div slot=\"content\">{{scope.row.ip}} ({{scope.row.position}})</div>\r\n                    <el-tag>{{scope.row.position}}</el-tag>\r\n                  </el-tooltip>\r\n                </div>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n          <el-pagination\r\n            background\r\n            layout=\"prev, pager, next,sizes,total\"\r\n            :page-sizes=\"[5, 10, 15, 20]\"\r\n            :page-size=\"pageinfo.pageSize\"\r\n            :current-page=\"pageinfo.currentPage\"\r\n            :total=\"pageinfo.total\"\r\n            style=\"margin-top: 10px;\"\r\n            @current-change=\"recycleCurrentChange\"\r\n            @size-change=\"recycleSizeChange\"\r\n          ></el-pagination>\r\n        </template>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport QS from \"qs\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      surveyId: \"\",\r\n      recycleList: [],\r\n      pageinfo: {\r\n        //每页数量\r\n        pageSize: 5,\r\n        //当前页\r\n        currentPage: 1,\r\n        //总数量\r\n        total: 0\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    recyclePageQuery() {\r\n      const recycle = {};\r\n      recycle.surveyId = this.surveyId;\r\n      recycle.page = this.pageinfo.currentPage;\r\n      recycle.size = this.pageinfo.pageSize;\r\n      this.$http\r\n        .post(\"recycle/list\", QS.stringify(recycle))\r\n        .then(res => {\r\n            this.recycleList = res.data.list;\r\n            this.pageinfo.total = res.data.count;\r\n        })\r\n    },\r\n    //根据页码查询数据\r\n    recycleCurrentChange(page) {\r\n      this.pageinfo.currentPage = page;\r\n      this.recyclePageQuery();\r\n    },\r\n    recycleSizeChange(pageSize) {\r\n      this.pageinfo.pageSize = pageSize;\r\n      this.pageinfo.currentPage = 1;\r\n      this.recyclePageQuery();\r\n    },\r\n    see(id, recycleId) {\r\n      window.open(\r\n        `#/view/recycle?id=${id}&recycleId=${recycleId}&surveyId=${this.surveyId}`\r\n      );\r\n    },\r\n    del(index, row) {\r\n      this.$http\r\n        .get(\"recycle/del/\" + row.id)\r\n        .then(() => {\r\n            this.recyclePageQuery();\r\n        })\r\n    }\r\n  },\r\n  mounted() {\r\n    this.surveyId = this.$route.query.surveyId;\r\n    this.recyclePageQuery();\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n/* 滚动条样式 start */\r\n.el-table--scrollable-y .el-table__body-wrapper::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n.el-table--scrollable-y .el-table__body-wrapper::-webkit-scrollbar-thumb {\r\n  background-color: rgba(0, 0, 0, 0.15);\r\n  border-radius: 5px;\r\n}\r\n.el-table--scrollable-y .el-table__body-wrapper::-webkit-scrollbar-thumb:hover {\r\n  background-color: rgba(0, 0, 0, 0.2);\r\n}\r\n/* 滚动条样式 end */\r\n.el-popper {\r\n  padding: 0;\r\n}\r\n.el-popconfirm {\r\n  padding: 10px;\r\n}\r\n</style>\r\n<style scoped>\r\n.table-btn {\r\n  color: #909399;\r\n}\r\n.table-btn:hover {\r\n  color: #409EFF;\r\n}\r\n</style>\r\n\r\n"]}]}